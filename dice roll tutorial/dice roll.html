<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html dir="ltr" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="./dice roll_files/main.css" />
    <link
      rel="stylesheet"
      type="text/css"
      media="print"
      href="./dice roll_files/main_print.css"
    />
    <link rel="profile" href="http://gmpg.org/xfn/11" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Codrops"
      href="https://tympanus.net/codrops/feed/"
    />

    <script src="./dice roll_files/ethicalads.min.js.download"></script>
    <style>
      [data-ea-publisher].loaded,
      [data-ea-type].loaded {
        font-size: 14px;
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
          Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,
          Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
        font-weight: normal;
        font-style: normal;
        letter-spacing: 0px;
        vertical-align: baseline;
        line-height: 1.3em;
      }
      [data-ea-publisher].loaded a,
      [data-ea-type].loaded a {
        text-decoration: none;
      }
      [data-ea-publisher].loaded .ea-pixel,
      [data-ea-type].loaded .ea-pixel {
        display: none;
      }
      [data-ea-publisher].loaded .ea-content,
      [data-ea-type].loaded .ea-content {
        margin: 1em 1em 0.5em 1em;
        padding: 1em;
        background: rgba(0, 0, 0, 0.03);
        color: #505050;
      }
      [data-ea-publisher].loaded .ea-content a:link,
      [data-ea-type].loaded .ea-content a:link {
        color: #505050;
      }
      [data-ea-publisher].loaded .ea-content a:visited,
      [data-ea-type].loaded .ea-content a:visited {
        color: #505050;
      }
      [data-ea-publisher].loaded .ea-content a:hover,
      [data-ea-type].loaded .ea-content a:hover {
        color: #373737;
      }
      [data-ea-publisher].loaded .ea-content a:active,
      [data-ea-type].loaded .ea-content a:active {
        color: #373737;
      }
      [data-ea-publisher].loaded .ea-content a strong,
      [data-ea-publisher].loaded .ea-content a b,
      [data-ea-type].loaded .ea-content a strong,
      [data-ea-type].loaded .ea-content a b {
        color: #088cdb;
      }
      [data-ea-publisher].loaded .ea-callout a:link,
      [data-ea-type].loaded .ea-callout a:link {
        color: #6a6a6a;
      }
      [data-ea-publisher].loaded .ea-callout a:visited,
      [data-ea-type].loaded .ea-callout a:visited {
        color: #6a6a6a;
      }
      [data-ea-publisher].loaded .ea-callout a:hover,
      [data-ea-type].loaded .ea-callout a:hover {
        color: #505050;
      }
      [data-ea-publisher].loaded .ea-callout a:active,
      [data-ea-type].loaded .ea-callout a:active {
        color: #505050;
      }
      [data-ea-publisher].loaded .ea-callout a strong,
      [data-ea-publisher].loaded .ea-callout a b,
      [data-ea-type].loaded .ea-callout a strong,
      [data-ea-type].loaded .ea-callout a b {
        color: #088cdb;
      }
      [data-ea-publisher].loaded .ea-callout a,
      [data-ea-type].loaded .ea-callout a {
        font-size: 0.8em;
      }
      [data-ea-publisher].loaded .ea-domain,
      [data-ea-type].loaded .ea-domain {
        margin-top: 0.75em;
        font-size: 0.8em;
        text-align: center;
        color: #9d9d9d;
      }
      [data-ea-publisher].loaded.dark .ea-content,
      [data-ea-type].loaded.dark .ea-content {
        background: rgba(255, 255, 255, 0.05);
        color: #dcdcdc;
      }
      [data-ea-publisher].loaded.dark .ea-content a:link,
      [data-ea-type].loaded.dark .ea-content a:link {
        color: #dcdcdc;
      }
      [data-ea-publisher].loaded.dark .ea-content a:visited,
      [data-ea-type].loaded.dark .ea-content a:visited {
        color: #dcdcdc;
      }
      [data-ea-publisher].loaded.dark .ea-content a:hover,
      [data-ea-type].loaded.dark .ea-content a:hover {
        color: #f6f6f6;
      }
      [data-ea-publisher].loaded.dark .ea-content a:active,
      [data-ea-type].loaded.dark .ea-content a:active {
        color: #f6f6f6;
      }
      [data-ea-publisher].loaded.dark .ea-content a strong,
      [data-ea-publisher].loaded.dark .ea-content a b,
      [data-ea-type].loaded.dark .ea-content a strong,
      [data-ea-type].loaded.dark .ea-content a b {
        color: #50baf9;
      }
      [data-ea-publisher].loaded.dark .ea-callout a:link,
      [data-ea-type].loaded.dark .ea-callout a:link {
        color: #c3c3c3;
      }
      [data-ea-publisher].loaded.dark .ea-callout a:visited,
      [data-ea-type].loaded.dark .ea-callout a:visited {
        color: #c3c3c3;
      }
      [data-ea-publisher].loaded.dark .ea-callout a:hover,
      [data-ea-type].loaded.dark .ea-callout a:hover {
        color: #dcdcdc;
      }
      [data-ea-publisher].loaded.dark .ea-callout a:active,
      [data-ea-type].loaded.dark .ea-callout a:active {
        color: #dcdcdc;
      }
      [data-ea-publisher].loaded.dark .ea-callout a strong,
      [data-ea-publisher].loaded.dark .ea-callout a b,
      [data-ea-type].loaded.dark .ea-callout a strong,
      [data-ea-type].loaded.dark .ea-callout a b {
        color: #50baf9;
      }
      [data-ea-publisher].loaded.dark .ea-domain,
      [data-ea-type].loaded.dark .ea-domain {
        color: #909090;
      }
      @media (prefers-color-scheme: dark) {
        [data-ea-publisher].loaded.adaptive .ea-content,
        [data-ea-type].loaded.adaptive .ea-content {
          background: rgba(255, 255, 255, 0.05);
          color: #dcdcdc;
        }
        [data-ea-publisher].loaded.adaptive .ea-content a:link,
        [data-ea-type].loaded.adaptive .ea-content a:link {
          color: #dcdcdc;
        }
        [data-ea-publisher].loaded.adaptive .ea-content a:visited,
        [data-ea-type].loaded.adaptive .ea-content a:visited {
          color: #dcdcdc;
        }
        [data-ea-publisher].loaded.adaptive .ea-content a:hover,
        [data-ea-type].loaded.adaptive .ea-content a:hover {
          color: #f6f6f6;
        }
        [data-ea-publisher].loaded.adaptive .ea-content a:active,
        [data-ea-type].loaded.adaptive .ea-content a:active {
          color: #f6f6f6;
        }
        [data-ea-publisher].loaded.adaptive .ea-content a strong,
        [data-ea-publisher].loaded.adaptive .ea-content a b,
        [data-ea-type].loaded.adaptive .ea-content a strong,
        [data-ea-type].loaded.adaptive .ea-content a b {
          color: #50baf9;
        }
        [data-ea-publisher].loaded.adaptive .ea-callout a:link,
        [data-ea-type].loaded.adaptive .ea-callout a:link {
          color: #c3c3c3;
        }
        [data-ea-publisher].loaded.adaptive .ea-callout a:visited,
        [data-ea-type].loaded.adaptive .ea-callout a:visited {
          color: #c3c3c3;
        }
        [data-ea-publisher].loaded.adaptive .ea-callout a:hover,
        [data-ea-type].loaded.adaptive .ea-callout a:hover {
          color: #dcdcdc;
        }
        [data-ea-publisher].loaded.adaptive .ea-callout a:active,
        [data-ea-type].loaded.adaptive .ea-callout a:active {
          color: #dcdcdc;
        }
        [data-ea-publisher].loaded.adaptive .ea-callout a strong,
        [data-ea-publisher].loaded.adaptive .ea-callout a b,
        [data-ea-type].loaded.adaptive .ea-callout a strong,
        [data-ea-type].loaded.adaptive .ea-callout a b {
          color: #50baf9;
        }
        [data-ea-publisher].loaded.adaptive .ea-domain,
        [data-ea-type].loaded.adaptive .ea-domain {
          color: #909090;
        }
      }
      [data-ea-publisher].loaded .ea-content,
      [data-ea-type].loaded .ea-content {
        border: 0px;
        border-radius: 3px;
        box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.15);
      }
      [data-ea-publisher].loaded.raised .ea-content,
      [data-ea-type].loaded.raised .ea-content {
        border: 0px;
        border-radius: 3px;
        box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.15);
      }
      [data-ea-publisher].loaded.bordered .ea-content,
      [data-ea-type].loaded.bordered .ea-content {
        border: 1px solid rgba(0, 0, 0, 0.04);
        border-radius: 3px;
        box-shadow: none;
      }
      [data-ea-publisher].loaded.bordered.dark .ea-content,
      [data-ea-type].loaded.bordered.dark .ea-content {
        border: 1px solid rgba(255, 255, 255, 0.07);
      }
      @media (prefers-color-scheme: dark) {
        [data-ea-publisher].loaded.bordered.adaptive .ea-content,
        [data-ea-type].loaded.bordered.adaptive .ea-content {
          border: 1px solid rgba(255, 255, 255, 0.07);
        }
      }
      [data-ea-publisher].loaded.flat .ea-content,
      [data-ea-type].loaded.flat .ea-content {
        border: 0px;
        border-radius: 3px;
        box-shadow: none;
      }
      [data-ea-type="image"].loaded,
      [data-ea-publisher]:not([data-ea-type]).loaded,
      .ea-type-image {
        display: inline-block;
      }
      [data-ea-type="image"].loaded .ea-content,
      [data-ea-publisher]:not([data-ea-type]).loaded .ea-content,
      .ea-type-image .ea-content {
        max-width: 180px;
        overflow: auto;
        text-align: center;
      }
      [data-ea-type="image"].loaded .ea-content > a > img,
      [data-ea-publisher]:not([data-ea-type]).loaded .ea-content > a > img,
      .ea-type-image .ea-content > a > img {
        width: 120px;
        height: 90px;
        display: inline-block;
      }
      [data-ea-type="image"].loaded .ea-content > .ea-text,
      [data-ea-publisher]:not([data-ea-type]).loaded .ea-content > .ea-text,
      .ea-type-image .ea-content > .ea-text {
        margin-top: 1em;
        font-size: 1em;
        text-align: center;
      }
      [data-ea-type="image"].loaded .ea-callout,
      [data-ea-publisher]:not([data-ea-type]).loaded .ea-callout,
      .ea-type-image .ea-callout {
        max-width: 180px;
        margin: 0em 1em 1em 1em;
        padding-left: 1em;
        padding-right: 1em;
        font-style: italic;
        text-align: right;
      }
      [data-ea-type="image"].loaded.horizontal .ea-content,
      [data-ea-publisher]:not([data-ea-type]).loaded.horizontal .ea-content,
      .ea-type-image.horizontal .ea-content {
        max-width: 320px;
      }
      [data-ea-type="image"].loaded.horizontal .ea-content > a > img,
      [data-ea-publisher]:not([data-ea-type]).loaded.horizontal
        .ea-content
        > a
        > img,
      .ea-type-image.horizontal .ea-content > a > img {
        float: left;
        margin-right: 1em;
      }
      [data-ea-type="image"].loaded.horizontal .ea-content .ea-text,
      [data-ea-publisher]:not([data-ea-type]).loaded.horizontal
        .ea-content
        .ea-text,
      .ea-type-image.horizontal .ea-content .ea-text {
        margin-top: 0em;
        text-align: left;
        overflow: auto;
      }
      [data-ea-type="image"].loaded.horizontal .ea-callout,
      [data-ea-publisher]:not([data-ea-type]).loaded.horizontal .ea-callout,
      .ea-type-image.horizontal .ea-callout {
        max-width: 320px;
        text-align: right;
      }
      [data-ea-type="text"].loaded,
      .ea-type-text {
        font-size: 14px;
      }
      [data-ea-type="text"].loaded .ea-content,
      .ea-type-text .ea-content {
        text-align: left;
      }
      [data-ea-type="text"].loaded .ea-callout,
      .ea-type-text .ea-callout {
        margin: 0.5em 1em 1em 1em;
        padding-left: 1em;
        padding-right: 1em;
        text-align: right;
        font-style: italic;
      }
      [data-ea-style="stickybox"].loaded {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 100;
      }
      [data-ea-style="stickybox"].loaded .ea-type-image .ea-stickybox-hide {
        cursor: pointer;
        position: absolute;
        top: 0.75em;
        right: 0.75em;
        background-color: #fefefe;
        border: 1px solid #088cdb;
        border-radius: 50%;
        color: #088cdb;
        font-size: 1em;
        text-align: center;
        height: 1.5em;
        width: 1.5em;
        line-height: 1.4;
      }
      @media (max-width: 1300px) {
        [data-ea-style="stickybox"].loaded {
          position: static;
          bottom: 0;
          right: 0;
          margin: auto;
          text-align: center;
        }
        [data-ea-style="stickybox"].loaded .ea-stickybox-hide {
          display: none;
        }
      }
      @media (min-width: 1301px) {
        [data-ea-style="stickybox"].loaded .ea-type-image .ea-content {
          background: #dcdcdc;
        }
        [data-ea-style="stickybox"].loaded.dark .ea-type-image .ea-content {
          background: #505050;
        }
      }
      @media (min-width: 1301px) and (prefers-color-scheme: dark) {
        [data-ea-style="stickybox"].loaded.adaptive .ea-type-image .ea-content {
          background: #505050;
        }
      }
      [data-ea-style="fixedfooter"].loaded {
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 200;
        width: 100%;
        max-width: 100%;
      }
      [data-ea-style="fixedfooter"].loaded .ea-type-text {
        width: 100%;
        max-width: 100%;
        display: flex;
        z-index: 200;
        background: #dcdcdc;
      }
      [data-ea-style="fixedfooter"].loaded .ea-type-text .ea-content {
        border: 0px;
        border-radius: 3px;
        box-shadow: none;
      }
      [data-ea-style="fixedfooter"].loaded .ea-type-text .ea-content {
        background-color: inherit;
        max-width: 100%;
        margin: 0;
        padding: 1em;
        flex: auto;
      }
      [data-ea-style="fixedfooter"].loaded .ea-type-text .ea-callout {
        max-width: 100%;
        margin: 0;
        padding: 1em;
        flex: initial;
      }
      @media (max-width: 576px) {
        [data-ea-style="fixedfooter"].loaded .ea-type-text .ea-callout {
          display: none;
        }
      }
      [data-ea-style="fixedfooter"].loaded .ea-type-text .ea-fixedfooter-hide {
        cursor: pointer;
        color: #505050;
        padding: 1em;
        flex: initial;
        margin: auto 0;
      }
      [data-ea-style="fixedfooter"].loaded
        .ea-type-text
        .ea-fixedfooter-hide
        span {
        padding: 0.25em;
        font-size: 0.8em;
        font-weight: bold;
        border: 0.15em solid #505050;
        border-radius: 0.5em;
        white-space: nowrap;
      }
      [data-ea-style="fixedfooter"].loaded.dark .ea-type-text {
        background: #505050;
      }
      [data-ea-style="fixedfooter"].loaded.dark
        .ea-type-text
        .ea-fixedfooter-hide
        span {
        color: #dcdcdc;
        border-color: #dcdcdc;
      }
      @media (prefers-color-scheme: dark) {
        [data-ea-style="fixedfooter"].loaded.adaptive .ea-type-text {
          background: #505050;
        }
        [data-ea-style="fixedfooter"].loaded.adaptive
          .ea-type-text
          .ea-fixedfooter-hide
          span {
          color: #dcdcdc;
          border-color: #dcdcdc;
        }
      }
    </style>

    <!-- Adobe Fonts -->
    <link rel="stylesheet" href="./dice roll_files/lcq7jrt.css" />

    <!-- Favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://codrops-1f606.kxcdn.com/codrops/wp-content/themes/codropstheme03/favicons/apple-touch-icon.png?x79204&amp;v=2"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://codrops-1f606.kxcdn.com/codrops/wp-content/themes/codropstheme03/favicons/favicon-32x32.png?x79204&amp;v=2"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://codrops-1f606.kxcdn.com/codrops/wp-content/themes/codropstheme03/favicons/favicon-16x16.png?x79204&amp;v=2"
    />
    <link
      rel="manifest"
      href="https://tympanus.net/codrops/wp-content/themes/codropstheme03/favicons/site.webmanifest?v=2"
    />
    <link
      rel="mask-icon"
      href="https://tympanus.net/codrops/wp-content/themes/codropstheme03/favicons/safari-pinned-tab.svg?x79204&amp;v=2"
      color="#5bbad5"
    />
    <link
      rel="shortcut icon"
      href="https://codrops-1f606.kxcdn.com/codrops/wp-content/themes/codropstheme03/favicons/favicon.ico?x79204&amp;v=2"
    />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <!-- /end Favicon -->

    <!-- Web Fonts -->
    <link
      rel="preload"
      href="https://tympanus.net/codrops/wp-content/themes/codropstheme03/fonts/Inter-upright.var.woff2"
      as="font"
      type="font/woff2"
      crossorigin=""
    />
    <link
      rel="preload"
      href="https://tympanus.net/codrops/wp-content/themes/codropstheme03/fonts/Inter-italic.var.woff2"
      as="font"
      type="font/woff2"
      crossorigin=""
    />
    <style>
      @font-face {
        font-family: "Inter var";
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
          U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;

        font-weight: 100 900;
        font-display: swap;
        font-style: normal;
        font-named-instance: "Regular";
        src: url("/codrops/wp-content/themes/codropstheme03/fonts/Inter-upright.var.woff2")
          format("woff2");
      }

      @font-face {
        font-family: "Inter var";
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
          U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;

        font-weight: 100 900;
        font-display: swap;
        font-style: italic;
        font-named-instance: "Italic";
        src: url("/codrops/wp-content/themes/codropstheme03/fonts/Inter-italic.var.woff2")
          format("woff2");
      }
    </style>

    <title>Crafting a Dice Roller with Three.js and Cannon-es | Codrops</title>
    <meta name="robots" content="max-image-preview:large" />
    <meta name="robots" content="noai, noimageai" />
    <link rel="dns-prefetch" href="https://cpwebassets.codepen.io/" />

    <!-- SEO SIMPLE PACK 3.5.2 -->
    <meta
      name="description"
      content="This tutorial will guide you through the process of creating a 3D dice roller using Three.js and Cannon-es."
    />
    <meta name="keywords" content="dice roller, dice, three.js, cannon-es" />
    <link
      rel="canonical"
      href="https://tympanus.net/codrops/2023/01/25/crafting-a-dice-roller-with-three-js-and-cannon-es/"
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta
      property="og:image"
      content="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/diceroller-1.jpg?x79204"
    />
    <meta
      property="og:title"
      content="Crafting a Dice Roller with Three.js and Cannon-es | Codrops"
    />
    <meta
      property="og:description"
      content="This tutorial will guide you through the process of creating a 3D dice roller using Three.js and Cannon-es."
    />
    <meta
      property="og:url"
      content="https://tympanus.net/codrops/2023/01/25/crafting-a-dice-roller-with-three-js-and-cannon-es/"
    />
    <meta property="og:site_name" content="Codrops" />
    <meta
      property="article:publisher"
      content="https://www.facebook.com/codrops"
    />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="codrops" />
    <!-- / SEO SIMPLE PACK -->

    <!-- tympanus.net/codrops is managing ads with Advanced Ads 1.54.1 -->
    <script id="tympa-ready">
      (window.advanced_ads_ready = function (e, a) {
        a = a || "complete";
        var d = function (e) {
          return "interactive" === a ? "loading" !== e : "complete" === e;
        };
        d(document.readyState)
          ? e()
          : document.addEventListener(
              "readystatechange",
              function (a) {
                d(a.target.readyState) && e();
              },
              { once: "interactive" === a }
            );
      }),
        (window.advanced_ads_ready_queue =
          window.advanced_ads_ready_queue || []);
    </script>
    <link
      rel="stylesheet"
      id="wp-block-library-css"
      href="./dice roll_files/style.min.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="prismatic-blocks-css"
      href="./dice roll_files/styles-blocks.css"
      type="text/css"
      media="all"
    />
    <style id="classic-theme-styles-inline-css" type="text/css">
      /*! This file is auto-generated */
      .wp-block-button__link {
        color: #fff;
        background-color: #32373c;
        border-radius: 9999px;
        box-shadow: none;
        text-decoration: none;
        padding: calc(0.667em + 2px) calc(1.333em + 2px);
        font-size: 1.125em;
      }
      .wp-block-file__button {
        background: #32373c;
        color: #fff;
        text-decoration: none;
      }
    </style>
    <style id="global-styles-inline-css" type="text/css">
      :root {
        --wp--preset--aspect-ratio--square: 1;
        --wp--preset--aspect-ratio--4-3: 4/3;
        --wp--preset--aspect-ratio--3-4: 3/4;
        --wp--preset--aspect-ratio--3-2: 3/2;
        --wp--preset--aspect-ratio--2-3: 2/3;
        --wp--preset--aspect-ratio--16-9: 16/9;
        --wp--preset--aspect-ratio--9-16: 9/16;
        --wp--preset--color--black: #000000;
        --wp--preset--color--cyan-bluish-gray: #abb8c3;
        --wp--preset--color--white: #ffffff;
        --wp--preset--color--pale-pink: #f78da7;
        --wp--preset--color--vivid-red: #cf2e2e;
        --wp--preset--color--luminous-vivid-orange: #ff6900;
        --wp--preset--color--luminous-vivid-amber: #fcb900;
        --wp--preset--color--light-green-cyan: #7bdcb5;
        --wp--preset--color--vivid-green-cyan: #00d084;
        --wp--preset--color--pale-cyan-blue: #8ed1fc;
        --wp--preset--color--vivid-cyan-blue: #0693e3;
        --wp--preset--color--vivid-purple: #9b51e0;
        --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(
          135deg,
          rgba(6, 147, 227, 1) 0%,
          rgb(155, 81, 224) 100%
        );
        --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(
          135deg,
          rgb(122, 220, 180) 0%,
          rgb(0, 208, 130) 100%
        );
        --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(
          135deg,
          rgba(252, 185, 0, 1) 0%,
          rgba(255, 105, 0, 1) 100%
        );
        --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(
          135deg,
          rgba(255, 105, 0, 1) 0%,
          rgb(207, 46, 46) 100%
        );
        --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(
          135deg,
          rgb(238, 238, 238) 0%,
          rgb(169, 184, 195) 100%
        );
        --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(
          135deg,
          rgb(74, 234, 220) 0%,
          rgb(151, 120, 209) 20%,
          rgb(207, 42, 186) 40%,
          rgb(238, 44, 130) 60%,
          rgb(251, 105, 98) 80%,
          rgb(254, 248, 76) 100%
        );
        --wp--preset--gradient--blush-light-purple: linear-gradient(
          135deg,
          rgb(255, 206, 236) 0%,
          rgb(152, 150, 240) 100%
        );
        --wp--preset--gradient--blush-bordeaux: linear-gradient(
          135deg,
          rgb(254, 205, 165) 0%,
          rgb(254, 45, 45) 50%,
          rgb(107, 0, 62) 100%
        );
        --wp--preset--gradient--luminous-dusk: linear-gradient(
          135deg,
          rgb(255, 203, 112) 0%,
          rgb(199, 81, 192) 50%,
          rgb(65, 88, 208) 100%
        );
        --wp--preset--gradient--pale-ocean: linear-gradient(
          135deg,
          rgb(255, 245, 203) 0%,
          rgb(182, 227, 212) 50%,
          rgb(51, 167, 181) 100%
        );
        --wp--preset--gradient--electric-grass: linear-gradient(
          135deg,
          rgb(202, 248, 128) 0%,
          rgb(113, 206, 126) 100%
        );
        --wp--preset--gradient--midnight: linear-gradient(
          135deg,
          rgb(2, 3, 129) 0%,
          rgb(40, 116, 252) 100%
        );
        --wp--preset--font-size--small: 13px;
        --wp--preset--font-size--medium: 20px;
        --wp--preset--font-size--large: 36px;
        --wp--preset--font-size--x-large: 42px;
        --wp--preset--spacing--20: 0.44rem;
        --wp--preset--spacing--30: 0.67rem;
        --wp--preset--spacing--40: 1rem;
        --wp--preset--spacing--50: 1.5rem;
        --wp--preset--spacing--60: 2.25rem;
        --wp--preset--spacing--70: 3.38rem;
        --wp--preset--spacing--80: 5.06rem;
        --wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);
        --wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);
        --wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);
        --wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1),
          6px 6px rgba(0, 0, 0, 1);
        --wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);
      }
      :where(.is-layout-flex) {
        gap: 0.5em;
      }
      :where(.is-layout-grid) {
        gap: 0.5em;
      }
      body .is-layout-flex {
        display: flex;
      }
      .is-layout-flex {
        flex-wrap: wrap;
        align-items: center;
      }
      .is-layout-flex > :is(*, div) {
        margin: 0;
      }
      body .is-layout-grid {
        display: grid;
      }
      .is-layout-grid > :is(*, div) {
        margin: 0;
      }
      :where(.wp-block-columns.is-layout-flex) {
        gap: 2em;
      }
      :where(.wp-block-columns.is-layout-grid) {
        gap: 2em;
      }
      :where(.wp-block-post-template.is-layout-flex) {
        gap: 1.25em;
      }
      :where(.wp-block-post-template.is-layout-grid) {
        gap: 1.25em;
      }
      .has-black-color {
        color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-color {
        color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-color {
        color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-color {
        color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-color {
        color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-color {
        color: var(--wp--preset--color--luminous-vivid-orange) !important;
      }
      .has-luminous-vivid-amber-color {
        color: var(--wp--preset--color--luminous-vivid-amber) !important;
      }
      .has-light-green-cyan-color {
        color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-color {
        color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-color {
        color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-color {
        color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-color {
        color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-black-background-color {
        background-color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-background-color {
        background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-background-color {
        background-color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-background-color {
        background-color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-background-color {
        background-color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-background-color {
        background-color: var(
          --wp--preset--color--luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-amber-background-color {
        background-color: var(
          --wp--preset--color--luminous-vivid-amber
        ) !important;
      }
      .has-light-green-cyan-background-color {
        background-color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-background-color {
        background-color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-background-color {
        background-color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-background-color {
        background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-background-color {
        background-color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-black-border-color {
        border-color: var(--wp--preset--color--black) !important;
      }
      .has-cyan-bluish-gray-border-color {
        border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
      }
      .has-white-border-color {
        border-color: var(--wp--preset--color--white) !important;
      }
      .has-pale-pink-border-color {
        border-color: var(--wp--preset--color--pale-pink) !important;
      }
      .has-vivid-red-border-color {
        border-color: var(--wp--preset--color--vivid-red) !important;
      }
      .has-luminous-vivid-orange-border-color {
        border-color: var(
          --wp--preset--color--luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-amber-border-color {
        border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
      }
      .has-light-green-cyan-border-color {
        border-color: var(--wp--preset--color--light-green-cyan) !important;
      }
      .has-vivid-green-cyan-border-color {
        border-color: var(--wp--preset--color--vivid-green-cyan) !important;
      }
      .has-pale-cyan-blue-border-color {
        border-color: var(--wp--preset--color--pale-cyan-blue) !important;
      }
      .has-vivid-cyan-blue-border-color {
        border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
      }
      .has-vivid-purple-border-color {
        border-color: var(--wp--preset--color--vivid-purple) !important;
      }
      .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
        background: var(
          --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple
        ) !important;
      }
      .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
        background: var(
          --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan
        ) !important;
      }
      .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
        background: var(
          --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange
        ) !important;
      }
      .has-luminous-vivid-orange-to-vivid-red-gradient-background {
        background: var(
          --wp--preset--gradient--luminous-vivid-orange-to-vivid-red
        ) !important;
      }
      .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
        background: var(
          --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray
        ) !important;
      }
      .has-cool-to-warm-spectrum-gradient-background {
        background: var(
          --wp--preset--gradient--cool-to-warm-spectrum
        ) !important;
      }
      .has-blush-light-purple-gradient-background {
        background: var(--wp--preset--gradient--blush-light-purple) !important;
      }
      .has-blush-bordeaux-gradient-background {
        background: var(--wp--preset--gradient--blush-bordeaux) !important;
      }
      .has-luminous-dusk-gradient-background {
        background: var(--wp--preset--gradient--luminous-dusk) !important;
      }
      .has-pale-ocean-gradient-background {
        background: var(--wp--preset--gradient--pale-ocean) !important;
      }
      .has-electric-grass-gradient-background {
        background: var(--wp--preset--gradient--electric-grass) !important;
      }
      .has-midnight-gradient-background {
        background: var(--wp--preset--gradient--midnight) !important;
      }
      .has-small-font-size {
        font-size: var(--wp--preset--font-size--small) !important;
      }
      .has-medium-font-size {
        font-size: var(--wp--preset--font-size--medium) !important;
      }
      .has-large-font-size {
        font-size: var(--wp--preset--font-size--large) !important;
      }
      .has-x-large-font-size {
        font-size: var(--wp--preset--font-size--x-large) !important;
      }
      :where(.wp-block-post-template.is-layout-flex) {
        gap: 1.25em;
      }
      :where(.wp-block-post-template.is-layout-grid) {
        gap: 1.25em;
      }
      :where(.wp-block-columns.is-layout-flex) {
        gap: 2em;
      }
      :where(.wp-block-columns.is-layout-grid) {
        gap: 2em;
      }
      :root :where(.wp-block-pullquote) {
        font-size: 1.5em;
        line-height: 1.6;
      }
    </style>
    <link
      rel="stylesheet"
      id="avatar-manager-css"
      href="./dice roll_files/avatar-manager.min.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="crp-public-css"
      href="./dice roll_files/public.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="prismatic-prism-css"
      href="./dice roll_files/theme-okaidia.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      id="wp_typeahead_css-css"
      href="./dice roll_files/typeahead.css"
      type="text/css"
      media="all"
    />
    <script
      type="text/javascript"
      src="./dice roll_files/jquery.min.js.download"
      id="jquery-core-js"
    ></script>
    <script
      type="text/javascript"
      src="./dice roll_files/jquery-migrate.min.js.download"
      id="jquery-migrate-js"
    ></script>
    <script
      type="text/javascript"
      src="./dice roll_files/avatar-manager.min.js.download"
      id="avatar-manager-js"
    ></script>
    <script
      type="text/javascript"
      defer=""
      data-domain="tympanus.net"
      data-api="https://tympanus.net/codrops/wp-json/93f21d/v1/9f0a/03a11a96"
      data-cfasync="false"
      src="./dice roll_files/e3dc7394.js.download"
      id="plausible"
    ></script>
    <script type="text/javascript" id="plausible-analytics-js-after">
      /* <![CDATA[ */
      window.plausible =
        window.plausible ||
        function () {
          (window.plausible.q = window.plausible.q || []).push(arguments);
        };
      /* ]]> */
    </script>
    <script type="text/javascript" id="advanced-ads-advanced-js-js-extra">
      /* <![CDATA[ */
      var advads_options = {
        blog_id: "1",
        privacy: { enabled: false, state: "not_needed" },
      };
      /* ]]> */
    </script>
    <script
      type="text/javascript"
      src="./dice roll_files/advanced.min.js.download"
      id="advanced-ads-advanced-js-js"
    ></script>
    <script
      type="text/javascript"
      id="advanced_ads_pro/visitor_conditions-js-extra"
    >
      /* <![CDATA[ */
      var advanced_ads_pro_visitor_conditions = {
        referrer_cookie_name: "advanced_ads_pro_visitor_referrer",
        referrer_exdays: "365",
        page_impr_cookie_name: "advanced_ads_page_impressions",
        page_impr_exdays: "3650",
      };
      /* ]]> */
    </script>
    <script
      type="text/javascript"
      src="./dice roll_files/conditions.min.js.download"
      id="advanced_ads_pro/visitor_conditions-js"
    ></script>
    <script
      type="text/javascript"
      src="./dice roll_files/cos.js.download"
      id="customad-script-js"
    ></script>
    <script
      type="text/javascript"
      src="./dice roll_files/sticky.js.download"
      id="sticky-script-js"
    ></script>
    <link
      rel="https://api.w.org/"
      href="https://tympanus.net/codrops/wp-json/"
    />
    <link
      rel="alternate"
      title="JSON"
      type="application/json"
      href="https://tympanus.net/codrops/wp-json/wp/v2/posts/69521"
    />
    <link
      rel="EditURI"
      type="application/rsd+xml"
      title="RSD"
      href="https://tympanus.net/codrops/xmlrpc.php?rsd"
    />
    <meta name="generator" content="WordPress 6.6.2" />
    <link rel="shortlink" href="https://tympanus.net/codrops/?p=69521" />
    <link
      rel="alternate"
      title="oEmbed (JSON)"
      type="application/json+oembed"
      href="https://tympanus.net/codrops/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2023%2F01%2F25%2Fcrafting-a-dice-roller-with-three-js-and-cannon-es%2F"
    />
    <link
      rel="alternate"
      title="oEmbed (XML)"
      type="text/xml+oembed"
      href="https://tympanus.net/codrops/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2023%2F01%2F25%2Fcrafting-a-dice-roller-with-three-js-and-cannon-es%2F&amp;format=xml"
    />
    <meta name="plausible-analytics-version" content="2.1.3" />
    <script type="text/javascript">
      var advadsCfpQueue = [];
      var advadsCfpAd = function (adID) {
        if ("undefined" == typeof advadsProCfp) {
          advadsCfpQueue.push(adID);
        } else {
          advadsProCfp.addElement(adID);
        }
      };
    </script>
    <script src="./dice roll_files/search.js.download"></script>

    <noscript>
      <link
        rel="stylesheet"
        href="https://codrops-1f606.kxcdn.com/codrops/wp-content/themes/codropstheme03/css/noscript.css?x79204"
      />
    </noscript>

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://tympanus.net/codrops/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://tympanus.net/codrops/?s={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <script
      src="./dice roll_files/saved_resource"
      type="text/javascript"
      async=""
    ></script>
  </head>
  <body
    id="codrops-body"
    class="post-template-default single single-post postid-69521 single-format-standard aa-prefix-tympa-"
  >
    <div class="ct-container">
      <header class="ct-header">
        <div class="ct-inner">
          <div class="ct-branding">
            <a class="ct-logo" href="https://tympanus.net/codrops" rel="home"
              ><img
                class="ct-logo-img"
                src="./dice roll_files/codrops_logo_2023.svg"
                alt="Codrops logo"
            /></a>
          </div>

          <div class="ct-nav-wrapper">
            <nav class="ct-nav-main">
              <ul>
                <li>
                  <a href="https://tympanus.net/codrops/all-posts/"
                    >All Posts</a
                  >
                </li>
                <li><a href="https://tympanus.net/codrops/demos/">Demos</a></li>
                <li>
                  <a href="https://tympanus.net/codrops/webzibition/"
                    >Webzibition</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/collective/"
                    >Newsletter</a
                  >
                </li>
              </ul>
            </nav>
          </div>

          <div class="ct-header-items-right ct-cf">
            <div class="ct-search" id="ct-search">
              <form
                method="get"
                id="searchform"
                action="https://tympanus.net/codrops/"
              >
                <div class="ct-search-input-wrap">
                  <span
                    class="twitter-typeahead"
                    style="position: relative; display: inline-block"
                    ><input
                      class="tt-hint"
                      type="text"
                      autocomplete="off"
                      spellcheck="off"
                      disabled=""
                      style="
                        position: absolute;
                        top: 0px;
                        left: 0px;
                        border-color: transparent;
                        box-shadow: none;
                        background: none 0% 0% / auto repeat scroll padding-box
                          border-box rgba(0, 0, 0, 0);
                      " /><input
                      class="ct-search-input tt-query"
                      placeholder="Search on Codrops..."
                      type="text"
                      value=""
                      name="s"
                      id="s"
                      autocomplete="off"
                      spellcheck="false"
                      dir="auto"
                      style="
                        position: relative;
                        vertical-align: top;
                        background-color: transparent;
                      " /><span
                      style="
                        position: absolute;
                        left: -9999px;
                        visibility: hidden;
                        white-space: nowrap;
                        font-family: InterVariable, sans-serif;
                        font-size: 16px;
                        font-style: normal;
                        font-variant: normal;
                        font-weight: 600;
                        word-spacing: 0px;
                        letter-spacing: 0px;
                        text-indent: 0px;
                        text-rendering: auto;
                        text-transform: none;
                      "
                    ></span
                    ><span
                      class="tt-dropdown-menu"
                      style="
                        position: absolute;
                        top: 100%;
                        left: 0px;
                        z-index: 100;
                        display: none;
                      "
                    ></span
                  ></span>
                </div>
                <input type="hidden" name="search-type" value="posts" />
                <input
                  class="ct-search-submit"
                  type="submit"
                  id="go"
                  value=""
                />
                <span class="ct-icon-search"
                  ><img src="./dice roll_files/search.svg" alt="Search icon"
                /></span>
              </form>
            </div>
          </div>
          <!--/ct-header-items-right-->
        </div>
        <!-- ct-inner -->
      </header>
      <div class="ct-content">
        <div class="ct-inner">
          <div class="ct-main ct-main-post" id="ct-main" role="main">
            <div class="ct-post">
              <article
                id="post-69521"
                class="post-69521 post type-post status-publish format-standard has-post-thumbnail hentry category-tutorials tag-3d tag-cannon-es tag-three-js tag-webgl"
              >
                <header>
                  <h1>Crafting a Dice Roller with Three.js and Cannon-es</h1>
                  <div class="ct-post-excerpt">
                    <p>
                      This tutorial will guide you through the process of
                      creating a 3D dice roller using Three.js and Cannon-es.
                    </p>
                  </div>
                  <div class="ct-subline entry-meta">
                    <div class="ct-subline__author">
                      <span class="byline author vcard">
                        By
                        <a
                          href="https://tympanus.net/codrops/author/ksenia/"
                          title="Posts by Ksenia Kondrashova"
                          rel="author"
                          >Ksenia Kondrashova</a
                        >
                      </span>
                      in
                      <a href="https://tympanus.net/codrops/category/tutorials/"
                        >Tutorials</a
                      >
                      on
                      <time class="ct-subline__pubtime" pubdate="pubdate"
                        >January 25, 2023</time
                      >
                    </div>
                  </div>
                </header>
                <div class="ct-post-content">
                  <div class="ct-post-featured-img">
                    <a
                      href="http://tympanus.net/Tutorials/DiceRoller/"
                      target="_blank"
                      title="Crafting a Dice Roller with Three.js and Cannon-es Demo"
                      ><img
                        width="800"
                        height="600"
                        src="./dice roll_files/diceroller-1.jpg"
                        class="attachment-post-thumbnail size-post-thumbnail wp-post-image"
                        alt=""
                        decoding="async"
                        fetchpriority="high"
                        srcset="
                          https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/diceroller-1.jpg?x79204         800w,
                          https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/diceroller-1-400x300.jpg?x79204 400w,
                          https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/diceroller-1-768x576.jpg?x79204 768w
                        "
                        sizes="(max-width: 800px) 100vw, 800px"
                    /></a>
                  </div>

                  <div class="ct-demo-links">
                    <a
                      class="ct-demo-link ct-demo-link--view"
                      target="_blank"
                      href="http://tympanus.net/Tutorials/DiceRoller/"
                      >Demo</a
                    >

                    <a
                      class="ct-demo-link ct-demo-link--github"
                      target="_blank"
                      href="https://github.com/uuuulala/Threejs-rolling-dice-tutorial/"
                      >Code</a
                    >
                  </div>

                  <div
                    data-tympa-trackid="80588"
                    data-tympa-trackbid="1"
                    class="tympa-target"
                    id="tympa-1279290575"
                  >
                    <p class="ct-msponsor-article">
                      <span>From our sponsor:</span>
                      <a
                        href="https://www.chromatic.com/features/visual-test?utm_source=codrops&amp;utm_medium=article&amp;utm_campaign=q3_2024"
                        target="_blank"
                        rel="nofollow sponsor noopener"
                        >Chromatic - Visual testing for Storybook, Playwright
                        &amp; Cypress. Catch UI bugs before your users do.</a
                      >
                    </p>
                  </div>

                  <p>
                    In this tutorial, we will guide you through the process of
                    creating an interactive 3D dice roller using the JavaScript
                    libraries
                    <a
                      href="https://threejs.org/"
                      target="_blank"
                      rel="noreferrer noopener"
                      >Three.js</a
                    >
                    for creating 3D graphics, and
                    <a
                      href="https://pmndrs.github.io/cannon-es/"
                      target="_blank"
                      rel="noreferrer noopener"
                      >cannon-es</a
                    >
                    for adding interaction. We will start by building the dice
                    using modified BoxGeometry and without using textures,
                    shaders, or external 3D models. Then, we will use cannon-es
                    to incorporate physics, simulate the dice roll and detect
                    the landing side.
                  </p>

                  <h2 class="wp-block-heading">Coding the dice</h2>

                  <p>
                    Of course, it’s possible to find a ready-made dice model on
                    the web or create one in Blender, but let’s make it
                    programmatically using Three.js. After all, we’re learning
                    here 🙂
                  </p>

                  <p>
                    The dice geometry will be based on
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/mrdoob/three.js/blob/dev/examples/jsm/geometries/RoundedBoxGeometry.js"
                      target="_blank"
                      ><code>THREE.BoxGeometry</code></a
                    >, but modified to round the box corners and add notches on
                    the sides.
                  </p>

                  <h3 class="wp-block-heading">
                    Rounding the edges of the box
                  </h3>

                  <p>
                    Rounding the corners of a box is a quite common task, so
                    there are multiple solutions available for it. One such
                    solution is included in the Three.js package:
                    <code>RoundedBoxGeometry</code> extends the
                    <code>BoxGeometry</code> class and can be found under the
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/mrdoob/three.js/blob/dev/examples/jsm/geometries/RoundedBoxGeometry.js"
                      target="_blank"
                      >examples/jsm/geometries/</a
                    >
                    folder.
                  </p>

                  <p>
                    The <code>RoundedBoxGeometry</code> class works for any box
                    size and provides the configurable geometry with UV and
                    normals included. If you do not need any additional geometry
                    modifications over it, <code>RoundedBoxGeometry</code> is
                    likely the perfect out-of-the-box (ba dum tss!) solution.
                  </p>

                  <p>
                    The <code>RoundedBoxGeometry</code> allows to set a number
                    of segments for the rounded area, but flat surfaces are
                    always built with one pair of triangles.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      decoding="async"
                      width="400"
                      height="240"
                      src="./dice roll_files/rounded-box-provided-1-400x240.png"
                      alt=""
                      class="wp-image-69639"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-provided-1-400x240.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-provided-1-800x479.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-provided-1-768x460.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-provided-1.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      <code>RoundedBoxGeometry</code>
                    </figcaption>
                  </figure>

                  <p>
                    This limitation makes us unable to add the notches to the
                    sides of the box so we make a custom solution for rounding
                    the edges.
                  </p>

                  <p>
                    As a base, we take a cube as <code>BoxGeometry</code> with a
                    decent number of segments.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
    segments<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    edgeRadius<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token number">07</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> boxGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

                  <figure class="wp-block-image size-medium">
                    <img
                      decoding="async"
                      width="400"
                      height="210"
                      src="./dice roll_files/rounded-box-1-400x210.png"
                      alt=""
                      class="wp-image-69584"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-1-400x210.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-1-800x420.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-1-768x403.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-1.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      BoxGeometry
                    </figcaption>
                  </figure>

                  <p>
                    Practically, geometry modification means looping through the
                    box vertices to access the XYZ coordinates in the
                    <code>boxGeometry.attributes.position</code> array. Once the
                    XYZ coordinates are changed, they can be reapplied to the
                    position attribute.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createDiceGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> boxGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> positionAttribute <span class="token operator">=</span> boxGeometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionAttribute<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromBufferAttribute</span><span class="token punctuation">(</span>positionAttribute<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// modify position.x, position.y and position.z</span>

        positionAttribute<span class="token punctuation">.</span><span class="token function">setXYZ</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> boxGeometry<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    Please note that we don’t code the universal solution like
                    <code>RoundedBoxGeometry</code>. Since we make a cubic
                    shape, we cover only the case when all the sides of the box
                    are equal to 1. We also don’t bother calculating UV
                    coordinates as there is no texture to be applied to the
                    dice.
                  </p>

                  <p>
                    Let’s start with selecting the coordinates (vertex
                    positions) that are close to the box edges. As we have a box
                    side equal to 1, we know that the X, Y, and Z coordinates
                    vary from -0.5 to 0.5.
                  </p>

                  <p>
                    If all 3 vertex coordinates are close to -0.5 or 0.5, the
                    geometry vertex is close to the box vertex (let’s try not to
                    confuse the geometry vertices we modify with the eight box
                    vertices we’re rounding).
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="239"
                      src="./dice roll_files/rounded-box-2-400x239.png"
                      alt=""
                      class="wp-image-69585"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-2-400x239.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-2-800x478.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-2-768x459.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-2.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      all x, y, and z are close to 0.5 or -0.5
                    </figcaption>
                  </figure>

                  <p>
                    If only 2 of 3 coordinates are close to -0.5 or 0.5, the
                    geometric vertex is close to the edge of the box. Other
                    vertices keep the original position. For example, if X and Y
                    coordinates are close to -0.5 or 0.5, the vertex is close to
                    the edge parallel to axis Z.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="239"
                      src="./dice roll_files/rounded-box-3-400x239.png"
                      alt=""
                      class="wp-image-69586"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-3-400x239.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-3-800x478.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-3-768x459.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-3.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      only x and y are close to 0.5 or -0.5
                    </figcaption>
                  </figure>

                  <p>
                    This way, we select all the geometry vertices that should be
                    modified:
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createDiceGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">const</span> subCubeHalfSize <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">-</span> params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionAttribute<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// ...</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// position is close to box vertex</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// position is close to box edge that's parallel to Z axis</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// position is close to box edge that's parallel to Y axis</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// position is close to box edge that's parallel to X axis</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    First, let’s round the geometry vertices that are close to
                    the box vertices. We want to replace their original
                    <code>position</code> with XYZ coordinate lying on the
                    sphere placed in the corner of the box.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="214"
                      src="./dice roll_files/rounded-box-4-400x214.png"
                      alt=""
                      class="wp-image-69587"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-4-400x214.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-4-800x429.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-4-768x412.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-4.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    To transform <code>position</code> vector this way, we break
                    it to two components:
                  </p>

                  <ul class="wp-block-list">
                    <li>
                      <code>subCube</code> – vector that points to the box with
                      that’s smaller than original one by rounding radius
                    </li>

                    <li>
                      <code>addition</code> – the rest of
                      <code>position</code> vector
                    </li>
                  </ul>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionAttribute<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> subCubeHalfSize <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">-</span> params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">;</span>
    
    <span class="token comment">// ...</span>

    <span class="token keyword">const</span> subCube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span>
        Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>
        Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>
        Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>subCubeHalfSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> addition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subVectors</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> subCubeEdges<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="214"
                      src="./dice roll_files/rounded-box-5-400x214.png"
                      alt=""
                      class="wp-image-69588"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-5-400x214.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-5-800x429.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-5-768x412.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-5.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      subCube vector in purple, addition vector in black
                    </figcaption>
                  </figure>

                  <p>
                    The original vertex position is a sum of
                    <code>subCube</code> and <code>addition</code> vectors. We
                    keep <code>subCube</code> without change because it points
                    to the sphere center. The <code>addition</code> vector we
                    normalize so it points to the sphere with a radius = 1
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="298"
                      src="./dice roll_files/rounded-box-6-400x298.png"
                      alt=""
                      class="wp-image-69589"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-6-400x298.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-6-800x596.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-6-768x572.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-6.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      subCube vector in purple, addition vector in black<br />
                    </figcaption>
                  </figure>

                  <p>
                    … and multiply it by the rounding radius value to move
                    coordinate on the desired sphere.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="218"
                      src="./dice roll_files/rounded-box-7-400x218.png"
                      alt=""
                      class="wp-image-69590"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-7-400x218.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-7-800x435.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-7-768x418.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-7.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      subCube vector in purple, addition vector in black<br />
                    </figcaption>
                  </figure>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> positionAttribute<span class="token punctuation">.</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// ...</span>

    <span class="token keyword">const</span> subCube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>subCubeHalfSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> addition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subVectors</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> subCube<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// position is close to box vertex</span>
        addition<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">=</span> subCube<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre>

                  <p>With code above we can round all the cube vertices.</p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="218"
                      src="./dice roll_files/rounded-box-8-400x218.png"
                      alt=""
                      class="wp-image-69591"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-8-400x218.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-8-800x435.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-8-768x418.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-8.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    The same approach works for the box edges. For example, take
                    the geometry vertices that are close to the box edges
                    parallel to the Z-axis. Their <code>position.z</code> is
                    already correct, so only the X and Y coordinates need to be
                    modified. In other words,
                  </p>

                  <ul class="wp-block-list">
                    <li><code>position.z</code> is not modified</li>

                    <li>
                      <code>addition.z</code> should be set to zero before
                      normalizing <code>addition</code> vector
                    </li>
                  </ul>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="218"
                      src="./dice roll_files/rounded-box-9-400x218.png"
                      alt=""
                      class="wp-image-69592"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-9-400x218.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-9-800x435.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-9-768x418.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-9.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      subCube vector in purple, addition vector in black
                    </figcaption>
                  </figure>

                  <p>
                    Repeating it for other axes, we get a rounded cube geometry.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromBufferAttribute</span><span class="token punctuation">(</span>positionAttribute<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> subCube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>subCubeHalfSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> addition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subVectors</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> subCube<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addition<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    position <span class="token operator">=</span> subCube<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addition<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addition<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addition<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">=</span> subCube<span class="token punctuation">.</span>x <span class="token operator">+</span> addition<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">=</span> subCube<span class="token punctuation">.</span>y <span class="token operator">+</span> addition<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addition<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addition<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">=</span> subCube<span class="token punctuation">.</span>x <span class="token operator">+</span> addition<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">=</span> subCube<span class="token punctuation">.</span>z <span class="token operator">+</span> addition<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize <span class="token operator">&amp;&amp;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span> <span class="token operator">&gt;</span> subCubeHalfSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addition<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    addition<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">multiplyScalar</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">=</span> subCube<span class="token punctuation">.</span>y <span class="token operator">+</span> addition<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">=</span> subCube<span class="token punctuation">.</span>z <span class="token operator">+</span> addition<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="218"
                      src="./dice roll_files/rounded-box-10-400x218.png"
                      alt=""
                      class="wp-image-69593"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-10-400x218.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-10-800x435.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-10-768x418.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/rounded-box-10.png?x79204         1422w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                    <figcaption class="wp-element-caption">
                      vertices of rounded box
                    </figcaption>
                  </figure>

                  <h3 class="wp-block-heading">Updating the normals</h3>

                  <p>
                    Often, simply calling the
                    <code>computeVertexNormals()</code> after modifying the
                    geometry vertices is sufficient to update their normals. The
                    method computes normal for each vertex by averaging the
                    normals of neighbour faces (of faces that share this
                    vertex). It’s a very easy way to smooth geometry, unless
                    geometry has duplicated vertices.
                  </p>

                  <p>
                    It’s common to have 1+ geometry vertices placed on the same
                    position, mainly to maintain the UV and normal attributes.
                    For example, take <code>THREE.CylinderGeometry</code>. The
                    side surface has a seam that’s visible on the left picture.
                    There are two sets of vertices sitting on this vertical seam
                    line. The duplicated vertices have the same position and
                    same normal but different a UV attribute. The first set of
                    vertices is connected to the faces on the left to the seam
                    line (UV.x = 1), and the second set of vertices is connected
                    to the faces on the right side from the seam (UV.x = 0).
                    Duplicated vertices are necessary to properly wrap the
                    texture around the side and, in case of cylinder, to support
                    <a
                      rel="noreferrer noopener"
                      href="https://threejs.org/docs/#api/en/geometries/CylinderGeometry"
                      target="_blank"
                      >thetaLength parameter</a
                    >. <br />Of course, <code>THREE.CylinderGeometry</code> is
                    coming with properly calculated normals like you see on the
                    central picture.
                  </p>

                  <figure class="wp-block-image size-large">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="800"
                      height="267"
                      src="./dice roll_files/3xcylinder-800x267.png"
                      alt=""
                      class="wp-image-69630"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/3xcylinder-800x267.png?x79204   800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/3xcylinder-400x133.png?x79204   400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/3xcylinder-768x256.png?x79204   768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/3xcylinder-1536x512.png?x79204 1536w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/3xcylinder-2048x683.png?x79204 2048w
                      "
                      sizes="(max-width: 800px) 100vw, 800px"
                    />
                    <figcaption class="wp-element-caption">
                      <code>CylinderGeometry</code> with texture (left),
                      original normals (center), automatically recalculated
                      normals (right)
                    </figcaption>
                  </figure>

                  <p>
                    But if we call
                    <code>cylinder.geometry.computeVertexNormals()</code> (even
                    without any geometry modification) the normals would turn to
                    what you see on the right picture. The average face normals
                    are different for left and right set of duplicated vertices.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cylinder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CylinderGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// here normals are correct (central pic)</span>

cylinder<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token function">computeVertexNormals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// here normals have a seam (right pic)</span></code></pre>

                  <p>
                    <code>THREE.BoxGeometry</code> has duplicated vertices on
                    the box as well. They’re placed on the box edges. That’s why
                    we can easily map textures on the each side of the box… and
                    that’s why we have similar problem with seams.
                  </p>

                  <p>
                    The picture below shows original box normals on the modified
                    geometry
                  </p>

                  <figure class="wp-block-image size-medium is-resized">
                    <img
                      loading="lazy"
                      decoding="async"
                      src="./dice roll_files/wireframes-and-original-nirmals-400x190.png"
                      alt=""
                      class="wp-image-69919"
                      width="400"
                      height="190"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/wireframes-and-original-nirmals-400x190.png?x79204   400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/wireframes-and-original-nirmals-800x381.png?x79204   800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/wireframes-and-original-nirmals-768x366.png?x79204   768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/wireframes-and-original-nirmals-1536x731.png?x79204 1536w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/wireframes-and-original-nirmals-2048x975.png?x79204 2048w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    With extra vertices on the box edges, the
                    <code>computeVertexNormals()</code> doesn’t produce the
                    correct result.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="315"
                      height="300"
                      src="./dice roll_files/cube-normals-ill-3-315x300.png"
                      alt=""
                      class="wp-image-69920"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/cube-normals-ill-3-315x300.png?x79204 315w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/cube-normals-ill-3.png?x79204         584w
                      "
                      sizes="(max-width: 315px) 100vw, 315px"
                    />
                  </figure>

                  <p>
                    To fix the seams we need to remove all duplicated vertices
                    before calling <code>computeVertexNormals()</code>. It can
                    be easily done with
                    <a
                      rel="noreferrer noopener"
                      href="https://threejs.org/docs/#examples/en/utils/BufferGeometryUtils.mergeVertices"
                      target="_blank"
                      >mergeVertices()</a
                    >
                    method which meant to delete the vertices with very same set
                    of attributes. Duplicated vertices have normal and uv
                    attributes inherited from <code>BoxGeometry</code> that we
                    delete. Once it’s done, duplicated vertices have only a
                    position attribute and vertices with same position that can
                    be automatically merged.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token comment">// mergeVertices() requires the import of BufferGeometryUtils file</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> BufferGeometryUtils <span class="token keyword">from</span> <span class="token string">'three/addons/utils/BufferGeometryUtils.js'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
<span class="token comment">// all the modifications of geometryBase.attributes.position</span>

geometryBase<span class="token punctuation">.</span><span class="token function">deleteAttribute</span><span class="token punctuation">(</span><span class="token string">'normal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
geometryBase<span class="token punctuation">.</span><span class="token function">deleteAttribute</span><span class="token punctuation">(</span><span class="token string">'uv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
geometryBase <span class="token operator">=</span> BufferGeometryUtils<span class="token punctuation">.</span><span class="token function">mergeVertices</span><span class="token punctuation">(</span>geometryBase<span class="token punctuation">)</span><span class="token punctuation">;</span>

geometryBase<span class="token punctuation">.</span><span class="token function">computeVertexNormals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

                  <p>With the code above we complete the rounded cube.</p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="315"
                      height="300"
                      src="./dice roll_files/cube-normals-ill-4-315x300.png"
                      alt=""
                      class="wp-image-69921"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/cube-normals-ill-4-315x300.png?x79204 315w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/cube-normals-ill-4.png?x79204         584w
                      "
                      sizes="(max-width: 315px) 100vw, 315px"
                    />
                  </figure>

                  <p>
                    P.S. To fix the normals of rounded <em>cube</em>, it’s also
                    possible to simply re-use the <code>addition</code> vector
                    instead of merging the vertices and recomputing normals:
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> normalAttribute <span class="token operator">=</span> boxGeometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>normal<span class="token punctuation">;</span>
<span class="token comment">// ...</span>
normalAttribute<span class="token punctuation">.</span><span class="token function">setXYZ</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> addition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> addition<span class="token punctuation">.</span>y<span class="token punctuation">,</span> addition<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

                  <p>
                    It’s an easy and elegant solution but we want to
                    automatically update the normals again after the next
                    geometry modification. So for today’s project we stick with
                    a combination of <code>mergeVertices()</code> and
                    <code>computeVertexNormals()</code>.
                  </p>

                  <h3 class="wp-block-heading">
                    Applying notches to the sides
                  </h3>

                  <p>
                    The next step is to add one to six smooth hollows to the
                    sides of the cube. To start, let’s add one to the center of
                    top side. We can select the top side vertices simply by
                    checking if the <code>position.y</code> value equals to 0.5.
                    For selected vertices, we’d decrease
                    <code>position.y</code> by height of the notch.
                  </p>

                  <p>
                    The challenge is about calculating the notch shape. Let’s
                    think about 2D space first and form a centered symmetrical
                    smooth impulse on the XY coordinates.
                  </p>

                  <p>
                    First step is a cosine function for a wave with a peak at x
                    = 0.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="226"
                      src="./dice roll_files/graph-1-1-400x226.png"
                      alt=""
                      class="wp-image-69711"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-1-1-400x226.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-1-1-800x451.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-1-1-768x433.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-1-1.png?x79204         1450w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>Then make it a positive number by adding 1 to Y.</p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="226"
                      src="./dice roll_files/graph-4-1-400x226.png"
                      alt=""
                      class="wp-image-69712"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-4-1-400x226.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-4-1-800x451.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-4-1-768x433.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-4-1.png?x79204         1450w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    The period of cosine is 2 x <em>π</em>, meaning the central
                    wave starts at x = –<em>π</em> and ends in x = <em>π</em>.
                    It would be more handy to have it from -1 to 1, so we
                    multiply x by <em>π</em>.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="226"
                      src="./dice roll_files/graph-3-1-400x226.png"
                      alt=""
                      class="wp-image-69713"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-3-1-400x226.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-3-1-800x451.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-3-1-768x433.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-3-1.png?x79204         1450w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    As we need only a single wave at the center, we limit x
                    value to be from -1 to 1.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="226"
                      src="./dice roll_files/graph-2-1-400x226.png"
                      alt=""
                      class="wp-image-69714"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-2-1-400x226.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-2-1-800x451.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-2-1-768x433.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/graph-2-1.png?x79204         1450w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    Great! The impulse can be parameterized with
                    <code>PULSE_WIDTH</code> and
                    <code>PULSE_DEPTH</code> variables and that’s how we use it
                    for the dice notch.
                  </p>

                  <div class="cp_embed_wrapper">
                    <iframe
                      allowfullscreen="true"
                      allowpaymentrequest="true"
                      allowtransparency="true"
                      class="cp_embed_iframe"
                      frameborder="0"
                      height="700"
                      width="100%"
                      name="cp_embed_1"
                      scrolling="no"
                      src="./dice roll_files/VwBMNQN(1).html"
                      style="width: 100%; overflow: hidden; display: block"
                      title="CodePen Embed"
                      loading="lazy"
                      id="cp_embed_VwBMNQN"
                    ></iframe>
                  </div>
                  <script
                    async=""
                    src="./dice roll_files/ei.js.download"
                  ></script>

                  <p>
                    Turning the shape into 3D space is pretty easy. The 2D wave
                    defines Y as a function of X. To make Y a function of both X
                    and Z, we just multiply two waves – first one taken as a
                    function of X and second as a function of Z.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> notchWave <span class="token operator">=</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> params<span class="token punctuation">.</span>notchRadius<span class="token punctuation">)</span> <span class="token operator">*</span> v<span class="token punctuation">;</span>
    v <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> params<span class="token punctuation">.</span>notchDepth <span class="token operator">*</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> notch <span class="token operator">=</span> <span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">notchWave</span><span class="token punctuation">(</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">notchWave</span><span class="token punctuation">(</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

                  <p>
                    So, for the top side we subtract the
                    <code>notch([position.x, position.z])</code> value from
                    <code>position.y</code>, and similarly for other sides of
                    the box. As our impulse is centered at the (0, 0) point, we
                    can shift the notches around the side surface by adding the
                    offset to the <code>notch</code> function arguments.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> offset <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">23</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>y <span class="token operator">===</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>y <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>x <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>z <span class="token operator">===</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>z <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>z <span class="token operator">===</span> <span class="token operator">-</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>z <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>z <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token operator">-</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>y <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">.</span>y <span class="token operator">===</span> <span class="token operator">-</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">+</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    position<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">notch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> offset<span class="token punctuation">,</span> position<span class="token punctuation">.</span>z <span class="token operator">-</span> offset<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    We insert this code after the first
                    <code>geometryBase.attributes.position</code> modification
                    and get the dice mesh ready.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="306"
                      height="300"
                      src="./dice roll_files/final-dice-mesh-1-306x300.png"
                      alt=""
                      class="wp-image-69633"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-1-306x300.png?x79204 306w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-1-613x600.png?x79204 613w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-1-768x752.png?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-1.png?x79204         856w
                      "
                      sizes="(max-width: 306px) 100vw, 306px"
                    />
                  </figure>

                  <h3 class="wp-block-heading">Applying colors</h3>

                  <p>
                    To color the dice, we just apply a grey
                    <code>MeshStandardMaterial</code> to it.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="306"
                      height="300"
                      src="./dice roll_files/final-dice-mesh-3-306x300.png"
                      alt=""
                      class="wp-image-69634"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-3-306x300.png?x79204 306w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-3-613x600.png?x79204 613w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-3-768x752.png?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-3.png?x79204         856w
                      "
                      sizes="(max-width: 306px) 100vw, 306px"
                    />
                  </figure>

                  <p>
                    To color the notches, we can make a simple trick and place
                    six planes inside the cube so they come out from the
                    notches.
                  </p>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="306"
                      height="300"
                      src="./dice roll_files/final-dice-mesh-2-306x300.png"
                      alt=""
                      class="wp-image-69637"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-2-306x300.png?x79204 306w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-2-613x600.png?x79204 613w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-2-768x752.png?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/final-dice-mesh-2.png?x79204         856w
                      "
                      sizes="(max-width: 306px) 100vw, 306px"
                    />
                  </figure>

                  <p>
                    We finish up the dice by coloring the inner panels in black
                    and grouping them with the main mesh.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createBoxGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> boxGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">,</span> params<span class="token punctuation">.</span>segments<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
    <span class="token comment">// modify boxGeometry.attributes.position and re-calculate normals</span>

    <span class="token keyword">return</span> boxGeometry<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createInnerGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// keep the plane size equal to flat surface of cube</span>
    <span class="token keyword">const</span> baseGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> params<span class="token punctuation">.</span>edgeRadius<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// place planes a bit behind the box sides</span>
    <span class="token keyword">const</span> offset <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">48</span><span class="token punctuation">;</span>

    <span class="token comment">// and merge them as we already have BufferGeometryUtils file loaded :)</span>
    <span class="token keyword">return</span> BufferGeometryUtils<span class="token punctuation">.</span><span class="token function">mergeBufferGeometries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">,</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>offset<span class="token punctuation">)</span><span class="token punctuation">,</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>offset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rotateX</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> offset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>offset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        baseGeometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>offset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createDiceMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> boxMaterialOuter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        color<span class="token punctuation">:</span> <span class="token number">0xeeeeee</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> boxMaterialInner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshStandardMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span>
        roughness<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        metalness<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        side<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>DoubleSide
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> diceMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> innerMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span><span class="token function">createInnerGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> boxMaterialInner<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> outerMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span><span class="token function">createBoxGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> boxMaterialOuter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    diceMesh<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>innerMesh<span class="token punctuation">,</span> outerMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> diceMesh<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <div class="cp_embed_wrapper">
                    <iframe
                      allowfullscreen="true"
                      allowpaymentrequest="true"
                      allowtransparency="true"
                      class="cp_embed_iframe"
                      frameborder="0"
                      height="400"
                      width="100%"
                      name="cp_embed_2"
                      scrolling="no"
                      src="./dice roll_files/rNrYNgj(1).html"
                      style="width: 100%; overflow: hidden; display: block"
                      title="CodePen Embed"
                      loading="lazy"
                      id="cp_embed_rNrYNgj"
                    ></iframe>
                  </div>
                  <script
                    async=""
                    src="./dice roll_files/ei.js.download"
                  ></script>

                  <p>
                    Next we’ll go into the animation. Please note that the
                    second part of this tutorial doesn’t really depend on the
                    first one and vice-versa.
                  </p>

                  <h2 class="wp-block-heading">Choosing the animation tool</h2>

                  <p>
                    Quoting any tutorial about this topic, I must say that
                    Three.js is a tool to draw 3D scenes in the browser. It
                    doesn’t include a physics engine or other built-in tools to
                    help with animations. To avoid any confusion, the Three.js
                    <a
                      rel="noreferrer noopener"
                      href="https://threejs.org/docs/#manual/en/introduction/Animation-system"
                      target="_blank"
                      >Animation system</a
                    >
                    is an API that is mostly used to run the animations for
                    imported models. It doesn’t help much to create new
                    transitions (except
                    <a
                      rel="noreferrer noopener"
                      href="https://threejs.org/examples/#misc_animation_keys"
                      target="_blank"
                      >KeyframeTrack</a
                    >
                    but it’s quite basic).
                  </p>

                  <p>
                    To add motion and interaction to the scene, we need to
                    calculate the values of the animated properties for each
                    frame. The animated property can be a transform of a 3D
                    object, color of material, or any other attribute of
                    Three.js instance.
                  </p>

                  <p>
                    The calculation of the animated property can be as simple as
                    incrementing it in the
                    <code>requestAnimationFrame()</code> loop or as complex as
                    importing some game engine to calculate the transforms.
                  </p>

                  <p>
                    The nature and complexity of a transition would determine
                    the choice of the animation tool.
                  </p>

                  <ul class="wp-block-list">
                    <li>
                      For basic conditions, linear transitions and simple
                      <a
                        rel="noreferrer noopener"
                        href="https://easings.net/"
                        target="_blank"
                        >easing</a
                      >, interpolations, and other trivial calculations, keep it
                      without extra libs.
                    </li>

                    <li>
                      Use
                      <a
                        rel="noreferrer noopener"
                        href="https://greensock.com/gsap/"
                        target="_blank"
                        >GSAP</a
                      >
                      to chain multiple animations, to handle
                      <a
                        rel="noreferrer noopener"
                        href="https://greensock.com/ease-visualizer/"
                        target="_blank"
                        >custom easings</a
                      >, to develop scroll-bound animations, and other
                      relatively complex transitions. This will add 60 to 80 kb
                      to your app.
                    </li>

                    <li>
                      Dig into physics tools if you need to apply forces to the
                      objects and make them collide with each other.
                    </li>
                  </ul>

                  <p>
                    As for physics, there are many solutions that are compatible
                    with Three.js. Depending on the project, it may be 3D or
                    only 2D physics, with or without
                    <a
                      rel="noreferrer noopener"
                      href="https://threejs.org/examples/physics_ammo_volume.html"
                      target="_blank"
                      >soft body</a
                    >
                    support, etc. Some libraries would include a particular
                    features like the simulation of vehicles or cloth. Some are
                    better compatible with React, some have rich debug tools,
                    etc.
                  </p>

                  <p>
                    In this tutorial, we only have dice falling on a surface. In
                    terms of physics, our requirements are:
                  </p>

                  <ol class="wp-block-list">
                    <li>
                      Only rigid bodies (dice shape won’t be deformed so we
                      don’t need soft body support)
                    </li>

                    <li>Box and Plane object shapes</li>

                    <li>
                      Collision detection so the dice would collide with each
                      other and with the bottom plane
                    </li>

                    <li>
                      Forces to throw the dice and let them fall on the floor
                    </li>
                  </ol>

                  <p>
                    Technically, those are all very basic requirements, and
                    every 3D physics library would work. So it makes sense to
                    consider only:
                  </p>

                  <ul class="wp-block-list">
                    <li>minimal size</li>

                    <li>decent support (docs, examples, etc.)</li>
                  </ul>

                  <p>
                    <a
                      rel="noreferrer noopener"
                      href="https://pmndrs.github.io/cannon-es/docs/index.html"
                      target="_blank"
                      >Cannon-es</a
                    >
                    is a good fit. The library in a minimal setup will add just
                    40-50 kb to the project. It looks like the lowest you can
                    get for 3D physics at the moment. Sometimes
                    <a
                      rel="noreferrer noopener"
                      href="https://chandlerprall.github.io/Physijs/"
                      target="_blank"
                      >Physijs</a
                    >
                    is pointed to have about the same size but in fact Physijs
                    is a plugin that helps using ammo.js library so you always
                    need to load both files.
                  </p>

                  <p>
                    The support of cannon-es at the moment is okayish – not as
                    good as we have for Three.js or GSAP but good comparing to
                    other available options for physics.
                  </p>

                  <p>
                    You may see the library being called outdated but that’s
                    only a confusion between
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/schteppe/cannon.js"
                      target="_blank"
                      >Cannon.js</a
                    >
                    and cannon-es. The first one is the original tool that
                    hasn’t been updated since 2016. In fact, it’s still
                    compatible with modern Three.js. But what’s more important,
                    it was forked in 2020 by the amazing
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/pmndrs"
                      target="_blank"
                      >pmndrs</a
                    >
                    team and has been regularly updated since then as a
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/pmndrs/use-cannon"
                      target="_blank"
                      >JS module</a
                    >
                    and as a
                    <a
                      rel="noreferrer noopener"
                      href="https://pmndrs.github.io/cannon-es/docs/"
                      target="_blank"
                      >React component</a
                    >.
                  </p>

                  <p>
                    There are many articles and examples you can find about the
                    topic. The old content still can be very helpful, although
                    there is no perfect compatibility between different versions
                    of Cannon.js and cannon-es.
                  </p>

                  <h2 class="wp-block-heading">
                    Three.js scene and physics world
                  </h2>

                  <p>
                    The main idea is to construct a 3D physics world in parallel
                    to the 3D scene. We add all the 3D objects that are meant to
                    move and interact as same-shaped bodies to the physics
                    world. After applying physical properties and forces to the
                    physics bodies, we let the engine simulate the physics world
                    frame by frame. Each step of the simulation, we take the
                    transforms calculated for the physics bodies, apply them to
                    the visible objects, and render (redraw) the Three.js scene.
                  </p>

                  <p>
                    Here is the <code>physicsWorld</code> object created. We’ll
                    add a few properties to it a bit later.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">let</span> physicsWorld <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>World</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>

                  <p>
                    I omit the part with creating a Three.js scene as it’s only
                    a basic set up with a couple of lights and shadows. And if
                    you made it until this point, you’re likely familiar with
                    Three.js already 🙂
                  </p>

                  <p>
                    To create a floor, we add a horizontal plane to the scene.
                    It has no color and only receives shadows. Then, we add the
                    same plane to the physics world as a static object. It
                    inherits the position and rotation of the mesh and as the
                    floor is static, these values won’t change.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createFloor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// Three.js (visible) object</span>
    <span class="token keyword">const</span> floor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ShadowMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            opacity<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    floor<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    floor<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">;</span>
    floor<span class="token punctuation">.</span>quaternion<span class="token punctuation">.</span><span class="token function">setFromAxisAngle</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Cannon-es (physical) object</span>
    <span class="token keyword">const</span> floorBody <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Body</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> CANNON<span class="token punctuation">.</span>Body<span class="token punctuation">.</span>STATIC<span class="token punctuation">,</span>
        shape<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Plane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    floorBody<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>floor<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    floorBody<span class="token punctuation">.</span>quaternion<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>floor<span class="token punctuation">.</span>quaternion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    physicsWorld<span class="token punctuation">.</span><span class="token function">addBody</span><span class="token punctuation">(</span>floorBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    To create the dice we use the
                    <code>createDiceMesh()</code> function from above without
                    much change. For multiple dice we can clone the original
                    object for the sake of performance.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> diceArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// to store { mesh, body } for a pair of visible mesh and physical body</span>

diceMesh <span class="token operator">=</span> <span class="token function">createDiceMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns dice as a THREE.Group()</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> params<span class="token punctuation">.</span>numberOfDice<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    diceArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">createDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> mesh <span class="token operator">=</span> diceMesh<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Body</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        mass<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        shape<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Box</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Vec3</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    physicsWorld<span class="token punctuation">.</span><span class="token function">addBody</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>mesh<span class="token punctuation">,</span> body<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    You may notice that dice mesh is based on the
                    <code>THREE.BoxGeometry(1, 1, 1)</code> while
                    <code>CANNON.Box</code> is based on <code>size = 0.5</code>.
                    So yes, cannon-es box takes half extent as argument, while
                    Three.js takes the full extent and I have no explanation for
                    it ¯_(ツ)_/¯.&nbsp; You can catch such things with
                    <a
                      rel="noreferrer noopener"
                      href="https://pmndrs.github.io/cannon-es-debugger/"
                      target="_blank"
                      >cannon-es-debugger</a
                    >
                    that generates visible wireframes for physical bodies.
                  </p>

                  <p>
                    Same as the floor, the dice mesh should have same position
                    and rotation as the dice body has. But unlike the floor,
                    dice properties are animated. That’s why we take care of
                    dice transforms outside the
                    <code>createDice()</code> function.
                  </p>

                  <h2 class="wp-block-heading">Animating the dice</h2>

                  <p>We control the dice animation by two functions:</p>

                  <ul class="wp-block-list">
                    <li>
                      <code>throwDice()</code> where the dice position is reset
                      to initial values. The function will be called at any time
                      by the user to throw the dice
                    </li>

                    <li>
                      <code>render()</code> where the next step of the physics
                      world is calculated, the position of the dice body is
                      updated, and we copy it to the visible mesh. The function
                      runs in the infinite
                      <code>requestAnimationFrame()</code> loop
                    </li>
                  </ul>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// recalculate the physics world</span>
    physicsWorld<span class="token punctuation">.</span><span class="token function">fixedStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// apply recalculated values to visible elements </span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> dice <span class="token keyword">of</span> diceArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dice<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>position<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// redraw the scene</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">throwDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    diceArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> dIdx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Vec3</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> dIdx <span class="token operator">*</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the floor is placed at y = -7</span>
        d<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    Right now, we have the dice hanging above the floor. They
                    don’t move as there is no force applied to them yet.
                  </p>

                  <figure class="wp-block-image size-large">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="800"
                      height="504"
                      src="./dice roll_files/physics-01-800x504.png"
                      alt=""
                      class="wp-image-69723"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-01-800x504.png?x79204  800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-01-400x252.png?x79204  400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-01-768x484.png?x79204  768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-01.png?x79204         1482w
                      "
                      sizes="(max-width: 800px) 100vw, 800px"
                    />
                  </figure>

                  <p>The first force we add is the world’s gravity.</p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">initPhysics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    physicsWorld <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>World</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        gravity<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    It’s common to see the gravity set as a vertical force with
                    value y = -9.8. It refers to the Earth’s gravity (9.807
                    m/s²) and supposed to keep your physics with “real” SI
                    units: forces in m/s², mass in kilograms, distances in
                    meters and so on. It’s possible to do so but 9.8 gravitation
                    makes sense only if you keep all other properties of the
                    world, objects and materials physically correct. Plus, in
                    this case <code>.fixedStep()</code> should be replaced with
                    the <code>.step()</code> function to change the simulation
                    speed to “real” seconds.
                  </p>

                  <p>
                    In practice, the use of Earth’s gravity value is rarely
                    necessary and achieve even realistic motion just
                    experimenting with different combinations of forces, speed,
                    rotations, and mass. Gravitation is a force influencing all
                    the dynamic bodies. It’s not required to have a certain
                    value or to be directed downward.
                  </p>

                  <p>
                    For the dices, we go with a vertical force with y = 50. It
                    makes dice fall down on the floor.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-02.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    To make the dice more bouncy, we will explore the concepts
                    of material and contact material. Material is a property of
                    each physical body, and contact material is the cannon-es
                    entity to describe how a pair of materials interacts.
                  </p>

                  <p>
                    As all the dice are similar physical bodies and no other
                    dynamic objects are present in the scene, it is sufficient
                    to use a single material and a single contact material. The
                    cannon-es library provides the
                    <code>world.defaultMaterial</code> and
                    <code>world.defaultContactMaterial</code>, which are
                    automatically applied. So there is no need to create new
                    ones.
                  </p>

                  <p>
                    The default settings for the contact material, including
                    friction and restitution, are already
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/pmndrs/cannon-es/blob/59d72ed/src/world/World.ts#L247"
                      target="_blank"
                      >defined</a
                    >
                    in the library. While the default friction appears to be
                    sufficient, we will increase the restitution value from 0 to
                    0.3 to achieve a more bouncy effect.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">initPhysics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    physicsWorld<span class="token punctuation">.</span>defaultContactMaterial<span class="token punctuation">.</span>restitution <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    Updating the restitution value results in more lively and
                    energetic movement for the dice.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-03.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    Adding a random initial rotation to each dice ensures a more
                    natural and unpredictable rolling motion:
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">throwDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    diceArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> dIdx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>

        <span class="token comment">// to reset the velocity dice got on the previous throw</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span><span class="token function">setZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>angularVelocity<span class="token punctuation">.</span><span class="token function">setZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// set initial position</span>
        <span class="token comment">// ...</span>
        
        <span class="token comment">// set initial rotation</span>
        d<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>quaternion<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>quaternion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    As the dice rotation is dynamic as well as dice position, we
                    update the dice’s <code>quaternion</code> on each step of
                    the simulation too.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// recalculate the physics world</span>
    <span class="token comment">// ...</span>
    
    <span class="token comment">// apply recalculated values to visible elements </span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> dice <span class="token keyword">of</span> diceArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dice<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dice<span class="token punctuation">.</span>mesh<span class="token punctuation">.</span>quaternion<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>quaternion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// redraw the scene</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-04.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    Right now, the dice are falling down under gravity force. To
                    throw them, we need to shortly apply additional force. In
                    other words, to apply a randomized
                    <a
                      rel="noreferrer noopener"
                      href="https://pmndrs.github.io/cannon-es/docs/classes/Body.html#applyImpulse"
                      data-type="URL"
                      data-id="https://pmndrs.github.io/cannon-es/docs/classes/Body.html#applyImpulse"
                      target="_blank"
                      >impulse</a
                    >
                    that forces the cube to fly a bit up and left.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">throwDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    diceArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> dIdx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// reset velocity, set initial position &amp; rotation</span>
        <span class="token comment">// ...</span>
        
        <span class="token keyword">const</span> force <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">applyImpulse</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Vec3</span><span class="token punctuation">(</span><span class="token operator">-</span>force<span class="token punctuation">,</span> force<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-05.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    Without a second argument, <code>applyImpulse()</code> force
                    is added to the dice’s center of mass. But if we shift it a
                    bit from the default (0, 0, 0) point, the impulse will give
                    some additional angular velocity and twist the dice.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-none"
                    tabindex="0"
                  ><code class="language- language-none">d.body.applyImpulse(
    new CANNON.Vec3(-force, force, 0),
    new CANNON.Vec3(0, 0, .2) // point of application of force is shifted from the center of mass 
);</code></pre>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/physics-06.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    That’s it. The dice are rolling randomly but at the same
                    time, they’re landing in a predictable area.
                  </p>

                  <h2 class="wp-block-heading">Check the top side</h2>

                  <p>
                    The last thing to do is checking the top side of each dice
                    once the rolling if finished. Aside of adding elements like
                    a button to throw the dice and place to show the score, we
                    need to:
                  </p>

                  <ul class="wp-block-list">
                    <li>capture the moment of stillness for each dice roll</li>

                    <li>
                      check the final rotation and get the top side number
                    </li>
                  </ul>

                  <p>
                    Cannon-es has some handy callbacks we can use here:
                    <code>sleepyEvent</code>, <code>sleepEvent</code>, and
                    <code>wakeupEvent</code>. Once
                    <code>allowSleep</code> option is set to
                    <code>true</code> for the physics world, we can access these
                    events. Cannon-es keeps track of the body velocity and fires
                    sleep-related events using <code>sleepSpeedLimit</code> and
                    <code>sleepTimeLimit</code>. Once the velocity is lower than
                    <code>sleepSpeedLimit</code>, we get the
                    <code>sleepy</code> event and if the
                    <code>sleepy</code> state is on for more than
                    <code>sleepTimeLimit</code>, then get the
                    <code>sleep</code> event.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">initPhysics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    physicsWorld <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>World</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        allowSleep<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// ...</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> params<span class="token punctuation">.</span>numberOfDice<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        diceArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">createDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addDiceEvents</span><span class="token punctuation">(</span>diceArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addDiceEvents</span><span class="token punctuation">(</span>dice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

                  <p>
                    The limits are
                    <a
                      rel="noreferrer noopener"
                      href="https://pmndrs.github.io/cannon-es/docs/classes/Body.html#sleepSpeedLimit"
                      target="_blank"
                      >customisable</a
                    >
                    and we can change <code>sleepTimeLimit</code> from default 1
                    second to 0.1 seconds. So we have a sleep callback on the
                    condition “the dice has a stable position for 100 ms in a
                    row”.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    
    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Body</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        sleepTimeLimit<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token number">1</span> <span class="token comment">// change from default 1 sec to 100ms</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    The event is triggered when the dice roll is finished. It
                    most likely means the dice is lying on the floor or (rarely
                    and with a big number of dices) it got stable on the edge.
                    In the first case, we disable speed tracking for the dice
                    body and check the final orientation to read a score. In
                    case of the dice balancing on the edge we keep the
                    sleep-tracker on.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">addDiceEvents</span><span class="token punctuation">(</span>dice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>

        dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>allowSleep <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token comment">// check the dice rotation</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lyingOnSide<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// show result</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// landed on edge =&gt; wait to fall on side and fire the event again</span>
            dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>allowSleep <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">throwDice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    diceArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> dIdx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        
        <span class="token comment">// track body velocity again for new throw</span>
        d<span class="token punctuation">.</span>body<span class="token punctuation">.</span>allowSleep <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    To check the dice orientation, specifically the side that
                    happened to be on the top, we take the rotation as Euler
                    vector and analyse the <code>euler</code> components.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> euler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CANNON<span class="token punctuation">.</span>Vec3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>quaternion<span class="token punctuation">.</span><span class="token function">toEuler</span><span class="token punctuation">(</span>euler<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

                  <p>We know that</p>

                  <ul class="wp-block-list">
                    <li>
                      the dice was created in a way to have side #1 on Yplus,
                      side #6 on Yminus, side #2 on Xplus, side #5 on Xminus,
                      side #3 on the Zplus and side #4 on Zminus
                    </li>

                    <li>the floor surface is perpendicular to the Y-axis</li>

                    <li>
                      quaternion is transformed to <code>euler</code> in
                      <a
                        rel="noreferrer noopener"
                        href="https://pmndrs.github.io/cannon-es/docs/classes/Quaternion.html#toEuler"
                        target="_blank"
                        >YZX order</a
                      >
                    </li>
                  </ul>

                  <figure class="wp-block-image size-medium">
                    <img
                      loading="lazy"
                      decoding="async"
                      width="400"
                      height="288"
                      src="./dice roll_files/1-side-400x288.png"
                      alt=""
                      class="wp-image-69678"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/1-side-400x288.png?x79204    400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/1-side-800x577.png?x79204    800w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/1-side-768x554.png?x79204    768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/1-side-1536x1107.png?x79204 1536w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/1-side.png?x79204           1762w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </figure>

                  <p>
                    The rotation stored in the <code>euler</code> vector is the
                    set of 3 rotations that are performed in YZX order with
                    respect to the local coordinate system. So the first
                    rotation goes around the local Y-axis (which is the same as
                    the world Y-axis), then around local Z-axis (which may now
                    be different from the world Z-axis), then local X rotation
                    (which may be different from the world X-axis).
                  </p>

                  <p>
                    The first Y-rotation can be absolutely random and the dice
                    will still be lying on the floor with side #1 looking up. It
                    means we don’t need <code>euler.y</code> to compute the
                    result.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      controls=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/y-random.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    Obviously, <code>euler.z</code> and
                    <code>euler.x</code> have to be both a multiple of
                    <em>π</em>/2 so we can go through possible combinations.
                  </p>

                  <p>
                    As mentioned, with <code>euler.z = 0</code> and
                    <code>euler.x = 0</code> we get side #1.
                  </p>

                  <p>
                    With <code>euler.z = 0</code>, rotating the cube around it’s
                    local X-axis to <em>π</em>/2, –<em>π</em>/2, and to –<em
                      >π</em
                    >
                    (-<em>π</em> is equal to <em>π</em> here) leads with side
                    #4, #3 and #6 orientation respectfully.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      controls=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/randY-x-options.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    With <code>euler.z = 0.5</code> the cube is rotated around
                    the Z-axis to <em>π</em>/2, and we have side #2 on the top
                    regardless of the X-rotation. In fact, the X-axis is now the
                    same as the original Y so we got the
                    <a
                      rel="noreferrer noopener"
                      href="https://en.wikipedia.org/wiki/Gimbal_lock"
                      target="_blank"
                      >Gimbal lock</a
                    >.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      controls=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/randY-z-plus.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    Same for the case of Z-rotation to –<em>π</em>/2. X-axis
                    gets locked again and we always have side #5 on the top.
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      controls=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/randY-z-minus.webm?x79204"
                    ></video>
                  </figure>

                  <p>
                    By the Euler angle
                    <a
                      rel="noreferrer noopener"
                      href="https://en.wikipedia.org/wiki/Euler_angles"
                      target="_blank"
                      >definition</a
                    >, the second rotation (Z-rotation with YZX order) covers
                    only the <em>π</em> range (while first and third rotations
                    have 2 x <em>π</em> range). In other words, Z-rotation is
                    only defined between –<em>π</em>/2 and <em>π</em>/2 so all
                    the dice angle options are covered.
                  </p>

                  <pre
                    class="wp-block-prismatic-blocks language-javascript"
                    tabindex="0"
                  ><code class="language-javascript"><span class="token keyword">const</span> eps <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> isZero <span class="token operator">=</span> <span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps<span class="token punctuation">;</span>
<span class="token keyword">let</span> isHalfPi <span class="token operator">=</span> <span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>angle <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps<span class="token punctuation">;</span>
<span class="token keyword">let</span> isMinusHalfPi <span class="token operator">=</span> <span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">+</span> angle<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps<span class="token punctuation">;</span>
<span class="token keyword">let</span> isPiOrMinusPi <span class="token operator">=</span> <span class="token punctuation">(</span>angle<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">-</span> angle<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps <span class="token operator">||</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>PI <span class="token operator">+</span> angle<span class="token punctuation">)</span> <span class="token operator">&lt;</span> eps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isZero</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isZero</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isHalfPi</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMinusHalfPi</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPiOrMinusPi</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// landed on edge =&gt; wait to fall on side and fire the event again</span>
        dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>allowSleep <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isHalfPi</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMinusHalfPi</span><span class="token punctuation">(</span>euler<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showRollResults</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// landed on edge =&gt; wait to fall on side and fire the event again</span>
    dice<span class="token punctuation">.</span>body<span class="token punctuation">.</span>allowSleep <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>

                  <p>
                    Through this tutorial, we have explored the use of Three.js
                    and cannon-es to create a dynamic and interactive dice
                    roller. By manipulating 3D shapes, experimenting with
                    different combinations of forces, and adjusting the
                    properties of the physical bodies, we were able to create a
                    realistic and engaging simulation. The user interface
                    elements and additional code for this project can be found
                    in the accompanying
                    <a
                      href="https://github.com/uuuulala/Threejs-rolling-dice-tutorial"
                      target="_blank"
                      rel="noreferrer noopener"
                      >repository</a
                    >. We encourage you to download the project and experiment
                    with different settings and parameters to further enhance
                    your understanding and skills in animation and physics
                    simulation. Have fun!
                  </p>

                  <figure class="wp-block-video">
                    <video
                      autoplay=""
                      controls=""
                      loop=""
                      muted=""
                      src="https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/01/dice-final.mov?x79204"
                    ></video>
                  </figure>

                  <p>
                    Check out the
                    <a
                      rel="noreferrer noopener"
                      href="http://tympanus.net/Tutorials/DiceRoller/"
                      target="_blank"
                      >final demo</a
                    >
                    and see the full code in the
                    <a
                      rel="noreferrer noopener"
                      href="https://github.com/uuuulala/Threejs-rolling-dice-tutorial/"
                      target="_blank"
                      >GitHub repo</a
                    >. 🎲 🤘
                  </p>
                </div>
              </article>
              <div class="ct-post-nav">
                <div class="ct-post-prev">
                  <a
                    href="https://tympanus.net/codrops/2023/01/24/10-best-tools-resources-for-web-designers-in-2023/"
                    rel="prev"
                    >10+ Best Tools &amp; Resources for Web Designers in 2023</a
                  >
                </div>
                <div class="ct-post-next">
                  <a
                    href="https://tympanus.net/codrops/2023/01/30/awesome-demos-roundup-23/"
                    rel="next"
                    >Awesome Demos Roundup #23</a
                  >
                </div>
              </div>
              <!-- ct-post-nav -->
              <p class="ct-post-tags">
                <a href="https://tympanus.net/codrops/tag/3d/" rel="tag">3d</a>
                <a href="https://tympanus.net/codrops/tag/cannon-es/" rel="tag"
                  >cannon-es</a
                >
                <a href="https://tympanus.net/codrops/tag/three-js/" rel="tag"
                  >three.js</a
                >
                <a href="https://tympanus.net/codrops/tag/webgl/" rel="tag"
                  >webgl</a
                >
              </p>

              <div class="clr"></div>
            </div>

            <div class="ct-author-info ct-box ct-box--bg">
              <div class="ct-author-avatar">
                <img
                  alt=""
                  class="avatar avatar-160 photo avatar-default"
                  height="160"
                  src="./dice roll_files/ksenia-avatar-160x160.png"
                  width="160"
                />
              </div>
              <!-- .author-avatar -->

              <div class="ct-author-page-desc">
                <h3>
                  <a href="https://tympanus.net/codrops/author/ksenia/"
                    >Ksenia Kondrashova</a
                  >
                </h3>
                <p>Independent Creative Front-End Developer</p>
                <ul class="ct-social-profiles">
                  <li>
                    <a href="https://ksenia-k.com/" target="_blank"
                      ><span>Website</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="ct-social-twitter"
                      href="https://twitter.com/uuuuuulala"
                      ><span>X</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="ct-social-instagram"
                      href="https://www.instagram.com/ksenia_showcase/"
                      ><span>Instagram</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="ct-social-codepen"
                      href="https://codepen.io/ksenia-k"
                      ><span>Codepen</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="ct-social-github"
                      href="https://github.com/uuuulala"
                      ><span>GitHub</span></a
                    >
                  </li>
                  <li>
                    <a
                      class="ct-social-linkedin"
                      href="https://www.linkedin.com/in/ksenia-kondrashova/"
                      ><span>LinkedIn</span></a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <!-- Related posts -->
            <div class="ct-related-post">
              <div class="ct-related-item">
                <div class="ct-latest-thumb-related">
                  <a
                    href="https://tympanus.net/codrops/2021/02/17/ideas-for-css-button-hover-animations/"
                  >
                    <img
                      width="400"
                      height="300"
                      src="./dice roll_files/buttonstyles-400x300.jpg"
                      class="attachment-medium size-medium wp-post-image"
                      alt=""
                      decoding="async"
                      loading="lazy"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/02/buttonstyles-400x300.jpg?x79204 400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/02/buttonstyles-768x576.jpg?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/02/buttonstyles.jpg?x79204         800w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </a>
                </div>
                <h4>
                  <a
                    href="https://tympanus.net/codrops/2021/02/17/ideas-for-css-button-hover-animations/"
                    >Ideas for CSS Button Hover Animations</a
                  >
                </h4>
              </div>
              <div class="ct-related-item">
                <div class="ct-latest-thumb-related">
                  <a
                    href="https://tympanus.net/codrops/2023/06/16/4-exclusive-demos-slideshows-typographic-animations/"
                  >
                    <img
                      width="400"
                      height="300"
                      src="./dice roll_files/4demos-1-400x300.jpg"
                      class="attachment-medium size-medium wp-post-image"
                      alt=""
                      decoding="async"
                      loading="lazy"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/06/4demos-1-400x300.jpg?x79204 400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/06/4demos-1-768x576.jpg?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2023/06/4demos-1.jpg?x79204         800w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </a>
                </div>
                <h4>
                  <a
                    href="https://tympanus.net/codrops/2023/06/16/4-exclusive-demos-slideshows-typographic-animations/"
                    >4 Exclusive Demos: Slideshows &amp; Typographic
                    Animations</a
                  >
                </h4>
              </div>
              <div class="ct-related-item">
                <div class="ct-latest-thumb-related">
                  <a
                    href="https://tympanus.net/codrops/2021/10/04/creating-3d-characters-in-three-js/"
                  >
                    <img
                      width="400"
                      height="300"
                      src="./dice roll_files/Threejs_tutorial-400x300.jpg"
                      class="attachment-medium size-medium wp-post-image"
                      alt=""
                      decoding="async"
                      loading="lazy"
                      srcset="
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/10/Threejs_tutorial-400x300.jpg?x79204 400w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/10/Threejs_tutorial-768x576.jpg?x79204 768w,
                        https://codrops-1f606.kxcdn.com/codrops/wp-content/uploads/2021/10/Threejs_tutorial.jpg?x79204         800w
                      "
                      sizes="(max-width: 400px) 100vw, 400px"
                    />
                  </a>
                </div>
                <h4>
                  <a
                    href="https://tympanus.net/codrops/2021/10/04/creating-3d-characters-in-three-js/"
                    >Creating 3D Characters in Three.js</a
                  >
                </h4>
              </div>
            </div>

            <div class="ct-row">
              <div class="ct-sharing ct-box ct-box--bg">
                <h3>
                  Stay in the loop: Get your dose of frontend twice a week
                </h3>
                <p>
                  👾
                  <strong>Hey! Looking for the latest in frontend?</strong>
                  Twice a week, we'll deliver the freshest frontend news,
                  website inspo, cool code demos, videos and UI animations right
                  to your inbox.
                </p>
                <p>
                  <strong>Zero fluff, all quality,</strong> to make your Mondays
                  and Thursdays more creative!
                </p>
                <div id="mc_embed_shell">
                  <div id="mc_embed_signup">
                    <form
                      action="https://tympanus.us10.list-manage.com/subscribe/post?u=10ffec652b0f54fe5d8682ac0&amp;id=a9cab6dcf0&amp;f_id=0047f7e1f0"
                      method="post"
                      id="mc-embedded-subscribe-form"
                      name="mc-embedded-subscribe-form"
                      class="validate"
                      target="_self"
                      novalidate=""
                    >
                      <div
                        class="nl-box nl-box--small"
                        id="mc_embed_signup_scroll"
                      >
                        <div class="mc-field-group">
                          <label
                            class="nl-box-label nl-box-label--invisible"
                            for="mce-EMAIL"
                            ><strong>Your email</strong></label
                          >
                          <input
                            class="nl-box-input"
                            data-1p-ignore=""
                            type="email"
                            name="EMAIL"
                            placeholder="Your email"
                            id="mce-EMAIL"
                            required=""
                            value=""
                          />
                        </div>
                        <div class="nl-box-action clear">
                          <input
                            type="submit"
                            name="subscribe"
                            id="mc-embedded-subscribe"
                            class="button"
                            value="Subscribe"
                          />
                        </div>
                        <div id="mce-responses" class="clear">
                          <div
                            class="response"
                            id="mce-error-response"
                            style="display: none"
                          ></div>
                          <div
                            class="response"
                            id="mce-success-response"
                            style="display: none"
                          ></div>
                        </div>
                        <div
                          aria-hidden="true"
                          style="position: absolute; left: -5000px"
                        >
                          <input
                            type="text"
                            name="b_10ffec652b0f54fe5d8682ac0_a9cab6dcf0"
                            tabindex="-1"
                            value=""
                          />
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>

              <div class="ct-bottom-article ct-box ct-box--bg">
                <!-- Display ad based on the value of 'hide_sidebar_sponsors' field -->
                <div
                  data-tympa-trackid="80590"
                  data-tympa-trackbid="1"
                  class="tympa-target"
                  id="tympa-323877312"
                >
                  <h5>From our partner</h5>
                  <a
                    class="cos"
                    href="https://www.chromatic.com/features/visual-test?utm_source=codrops&amp;utm_medium=sidebar_and_bottom_banner&amp;utm_campaign=q3_2024"
                    target="_blank"
                    rel="nofollow sponsored noopener"
                  >
                    <img
                      decoding="async"
                      class="cos__img"
                      src="./dice roll_files/Sidebar-300-x-250.png"
                      alt="Chromatic"
                      width="300px"
                      height="250px"
                    />
                    <div class="cos__text cos__text--nobg">
                      Visual testing for Storybook, Playwright, and Cypress.
                      Catch UI bugs that functional tests miss. Lightning-fast
                      &amp; zero flake.
                    </div>
                  </a>
                </div>
              </div>
            </div>
            <section id="comments" class="ct-comments">
              <p class="ct-nocomments"></p>
              <div class="ct-comment-form">
                <div class="clr"></div>
              </div>
            </section>
            <!-- #comments -->
          </div>
          <aside class="ct-sidebar">
            <div class="ct-pat">
              <div
                id="coswrap"
                class="coswrap"
                style="display: flex; flex-direction: column"
              >
                <div
                  data-tympa-trackid="80593"
                  data-tympa-trackbid="1"
                  class="tympa-target"
                  id="tympa-170695418"
                >
                  <a
                    class="cos"
                    href="https://www.chromatic.com/features/visual-test?utm_source=codrops&amp;utm_medium=sidebar_and_bottom_banner&amp;utm_campaign=q3_2024"
                    target="_blank"
                    rel="nofollow sponsored noopener"
                  >
                    <img
                      decoding="async"
                      class="cos__img"
                      src="./dice roll_files/Sidebar-300-x-250.png"
                      alt="Chromatic"
                      width="300px"
                      height="250px"
                    />
                    <div class="cos__text">
                      Visual testing for Storybook, Playwright, and Cypress.
                      Catch UI bugs that functional tests miss. Lightning-fast
                      &amp; zero flake.
                    </div>
                  </a>
                </div>
              </div>
            </div>
            <!--div class="ct-pat">
		<div style="background: #b0a9a9;width: 100%;height: 1px;margin: 4rem 0 3rem;"></div>
		<div id="bsap_1298539" class="bsarocks bsap_af25dfd2f1908889af7a1aa5f4dcbd9e"></div>
	</div-->
            <div class="ct-pat ct-sticky ct-sticky--show">
              <div class="ct-ea ct-ea--ver" id="eth_cos">
                <div
                  data-ea-publisher="tympanusnet-codrops"
                  data-ea-campaign-types="paid|publisher-house"
                  data-ea-type="image"
                  id="main-sidebar"
                  class="loaded"
                >
                  <div class="ea-placement ea-type-image">
                    <div class="ea-content">
                      <a
                        href="https://server.ethicalads.io/proxy/click/7914/eabf8a06-0235-4bd5-af72-b3957e841337/"
                        rel="nofollow noopener sponsored"
                        target="_blank"
                        ><img
                          src="./dice roll_files/QUAL_RB3_Gen2_Campaign_EthicalAds_V5_240x180_R2_TpPHPqO.png"
                          alt="Sponsored: Catchy Agency"
                      /></a>
                      <div class="ea-text">
                        <a
                          href="https://server.ethicalads.io/proxy/click/7914/eabf8a06-0235-4bd5-af72-b3957e841337/"
                          rel="nofollow noopener sponsored"
                          target="_blank"
                          ><strong class="ea-headline"
                            >Advance IoT with on-device AI. </strong
                          ><span class="ea-body"
                            >Explore the Qualcomm RB3 Gen 2 Development Kit
                            now.</span
                          ><strong class="ea-cta">
                            Build with Qualcomm</strong
                          ></a
                        >
                      </div>
                      <div class="ea-domain">www.qualcomm.com</div>
                    </div>
                    <div class="ea-callout">
                      <a
                        rel="nofollow noopener"
                        target="_blank"
                        href="https://www.ethicalads.io/advertisers/topics/frontend-web/?ref=ea-image"
                        >Ads by EthicalAds</a
                      >
                    </div>
                  </div>
                  <img
                    src="./dice roll_files/saved_resource(1)"
                    class="ea-pixel"
                  /><img
                    src="./dice roll_files/saved_resource(2)"
                    class="ea-pixel"
                  />
                </div>
              </div>
              <!--?php the_ad_group(16267); ?-->
            </div>

            <div class="clr"></div>
          </aside>

          <div class="clr"></div>
        </div>
      </div>
      <footer class="ct-footer">
        <div class="ct-inner">
          <div class="ct-footer__column">
            <h5>Explore the site</h5>
            <nav>
              <ul>
                <li><a href="https://tympanus.net/codrops/">Home</a></li>
                <li>
                  <a href="https://tympanus.net/codrops/category/articles/"
                    >Articles</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/category/tutorials/"
                    >Tutorials</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/category/playground/"
                    >Playground</a
                  >
                </li>
              </ul>
              <ul>
                <li><a href="https://tympanus.net/codrops/demos/">Demos</a></li>
                <li>
                  <a href="https://tympanus.net/codrops/webzibition/"
                    >Webzibition</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/collective/"
                    >Collective</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/css_reference/"
                    >CSS Reference</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/category/freebies/"
                    >Freebies</a
                  >
                </li>
              </ul>
              <ul>
                <li><a href="https://tympanus.net/codrops/about/">About</a></li>
                <li><a href="mailto:contact@codrops.com">Get in touch</a></li>
                <li>
                  <a href="https://tympanus.net/codrops/advertise/"
                    >Advertise</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/privacy-policy/"
                    >Privacy Policy</a
                  >
                </li>
                <li>
                  <a href="https://tympanus.net/codrops/licensing/">License</a>
                </li>
              </ul>
            </nav>
          </div>
          <div class="ct-footer__column">
            <h5>Follow Codrops</h5>
            <nav>
              <ul>
                <li><a href="http://www.x.com/codrops">X</a></li>
                <li><a href="https://instagram.com/codropsss">Instagram</a></li>
                <li><a href="https://t.me/codrops">Telegram</a></li>
                <li><a href="https://mastodon.social/@codrops">Mastodon</a></li>
                <li><a href="https://www.facebook.com/codrops">Facebook</a></li>
                <li><a href="https://github.com/codrops">GitHub</a></li>
                <li>
                  <a href="https://tympanus.net/codrops/feed/">RSS Feed</a>
                </li>
              </ul>
            </nav>
          </div>
          <div class="ct-footer__column ct-footer__column--credits">
            <nav>
              <ul>
                <li>
                  <strong>Content delivered by</strong>
                  <a
                    href="https://www.keycdn.com/"
                    title="Content Distribution Network"
                    target="blank"
                    class="credit-link"
                    ><svg
                      style="margin-top: 1rem; height: 37px"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 137.09 39.849"
                      title="Keycdn"
                      aria-label="Keycdn"
                    >
                      <path
                        fill="#26272e"
                        d="M3.971 32.104c.39.016.784.07 1.151.205v-.004l.056.02 4.842-4.723.178.237c.251.34.518.651.8.962l.103.119c.074.074.133.148.207.222l.12.118.117.119.104.103.118.119.104.103.133.119.12.104a12.868 12.868.0 008.025 3.065 12.983 12.983.0 006.915-1.792l.37.385c.43.459.874.918 1.304 1.377a15.234 15.234.0 01-8.648 2.414 15.224 15.224.0 01-9.418-3.554l.015-.03-3.107 3.063a3.873 3.873.0 11-3.707-2.752h.1zM33.58 12.127a15.231 15.231.0 012.206 8.323 15.172 15.172.0 01-3.805 9.684l.015.015 1.91 2.029c.77-.104 1.54.162 2.073.725a2.405 2.405.0 01-.089 3.391 2.405 2.405.0 01-3.39-.089 2.388 2.388.0 01-.608-2.102 739.91 739.91.0 00-3.36-3.569l-.194-.207.222-.178a12 12 0 001.6-1.525 12.818 12.818.0 003.243-8.233 12.84 12.84.0 00-1.6-6.575zM6.597 3.076c.68-.01 1.32.259 1.794.744a2.39 2.39.0 01.607 2.103l3.673 3.85-.223.178c-.577.459-1.11.962-1.599 1.525A12.927 12.927.0 009.191 26.298l-1.763 1.718a15.112 15.112.0 01-2.22-8.366c.076-3.565 1.465-7.009 3.798-9.691l-2.022-2.11a2.406 2.406.0 01-2.073-.727 2.405 2.405.0 01.09-3.391 2.43 2.43.0 011.367-.64c.076-.008.153-.01.23-.016zM37.498.0A3.873 3.873.0 1136.29 7.553v.005l-.06-.021-5.257 4.99-.178-.237c-.28-.37-.592-.74-.918-1.08l-.06-.075-.162-.163-.296-.296-.104-.089-.103-.088-.133-.119-.104-.089-.134-.118a12.862 12.862.0 00-7.966-3.021c-2.444-.06-4.828.548-6.9 1.792l-1.689-1.763a15.233 15.233.0 018.648-2.414 15.154 15.154.0 019.418 3.569h.03l3.48-3.305A3.873 3.873.0 0137.5.0z"
                      ></path>
                      <path
                        fill="#26272e"
                        d="M20.617 8.646c.438.002.875.036 1.309.086 6.249.785 10.676 6.486 9.906 12.735-.785 6.25-6.486 10.677-12.735 9.907-6.249-.785-10.677-6.487-9.907-12.735.746-5.797 5.616-9.973 11.427-9.993zm-.171 4.894c-2.53.203-4.36 2.116-4.425 4.659.04 1.766.802 3.013 2.246 3.989l.348.189-.88 4.139h5.901l-.879-4.14c1.62-.834 2.547-2.365 2.593-4.177-.034-2.624-2.064-4.6-4.664-4.665l-.24.006zm.088-.025h-.015.015zM50.991 14.514c-.287.0-.489.058-.834.518l-4.772 6.21 2.07-11.644c.086-.431-.144-.575-.489-.575h-4.313c-.517.0-.66.259-.718.575l-3.709 21.016c-.086.46.201.633.517.633h4.313c.316.0.632-.317.69-.633l1.15-6.555 2.501 6.555c.173.46.403.633.719.633h5.175c.374.0.517-.345.374-.633l-3.68-8.05 6.555-7.446c.23-.23.201-.604-.202-.604zm20.014 5.923c0-3.422-1.955-6.182-6.124-6.182-4.801.0-8.079 2.128-9.027 7.82l-.317 1.898a8.854 8.854.0 00-.115 1.466c0 4.083 3.163 6.066 6.354 6.066 2.415.0 4.37-.287 6.296-.89.489-.145.633-.346.719-.806l.46-2.587v-.115c0-.26-.173-.374-.431-.374h-.115c-1.093.115-3.997.23-5.52.23-1.438.0-2.358-.201-2.358-1.639.0-.259.029-.546.086-.891h8.942a.737.737.0 00.718-.633l.288-1.725c.086-.546.144-1.092.144-1.638zm-5.175-.202c0 .345-.058.748-.144 1.15h-4.255c.345-1.638 1.035-2.846 2.645-2.846 1.294.0 1.754.69 1.754 1.696zm24.527-5.29c0-.23-.259-.43-.517-.43h-4.744c-.316.0-.604.23-.719.545l-4.111 10.408h-.23c-.172.0-.201-.144-.23-.489l-.518-9.89c-.028-.316-.143-.575-.46-.575h-4.627c-.489.0-.719.23-.719.546v.087l1.667 13.685c.173 1.466.92 1.983 2.272 1.983h.374l-.403.95c-.345.833-.949 1.092-1.754 1.092-1.092.0-2.817-.173-3.881-.23h-.029c-.345.0-.69.287-.747.603l-.489 2.79v.085c0 .26.259.345.546.46.748.288 2.645.518 3.795.518 4.514.0 6.153-1.783 7.562-4.859l7.906-17.077a.533.533.0 00.057-.202z"
                      ></path>
                      <path
                        fill="#26272e"
                        d="M103.13 15.175c0-.287-.173-.373-.489-.46-.776-.2-2.156-.46-3.853-.46-4.427.0-7.273 2.214-8.193 7.562l-.374 2.156a11.156 11.156.0 00-.144 1.639c0 3.363 1.955 5.893 5.664 5.893 1.696.0 3.019-.23 4.025-.46.403-.086.633-.23.69-.603l.575-3.22v-.115c0-.26-.201-.432-.46-.432h-.057c-1.007.058-1.927.173-3.335.173-.978.0-1.553-.345-1.553-1.639.0-.345.029-.747.115-1.236l.374-2.156c.402-2.387 1.236-2.904 2.472-2.904 1.409.0 2.272.144 3.249.201h.058c.316.0.603-.23.66-.546l.576-3.249zm17.943-5.663c0-.288-.258-.49-.546-.49h-4.284c-.316.0-.603.26-.66.576l-.863 4.859c-.575-.087-1.553-.202-2.013-.202-5.232.0-7.849 2.185-8.797 7.504l-.403 2.243a9.023 9.023.0 00-.144 1.466c0 3.536 2.444 6.037 6.383 6.037 2.587.0 5.031-.402 6.584-.718.92-.202 1.063-.374 1.15-.92l3.594-20.27zm-7.158 9.43-1.38 7.877c-.547.086-1.15.144-1.984.144-1.236.0-1.667-.719-1.667-1.84.0-.345.028-.719.114-1.121l.403-2.243c.287-1.667.977-2.932 2.587-2.932.69.0 1.352.057 1.927.115zm23.176.2c0-3.22-1.323-4.887-4.514-4.887-1.063.0-2.645.26-4.657 1.582l.144-.748c.086-.431-.115-.575-.49-.575h-3.938c-.316.0-.604.259-.661.575l-2.76 15.525c-.058.403.259.633.661.633h4.111c.432.0.719-.288.777-.633l1.955-11.126c.517-.288 1.58-.633 2.443-.633.978.0 1.352.23 1.352 1.122.0.488-.115.977-.202 1.466l-1.61 9.171c-.057.288.0.633.489.633h4.313c.345.0.66-.317.718-.633l1.582-8.97c.143-.805.287-1.754.287-2.501z"
                      ></path></svg
                  ></a>
                </li>
                <li>© Codrops 2024</li>
              </ul>
            </nav>
          </div>
          <div class="ct-patron-box">
            <a
              class="ct-patron-button"
              href="https://www.patreon.com/bePatron?u=2516316"
            >
              <span>Support us on</span>
              <img
                src="./dice roll_files/patreon_logo.svg"
                alt="Patreon logo"
              />
            </a>
          </div>
        </div>
      </footer>
      <script
        type="text/javascript"
        src="./dice roll_files/ei(1).js.download"
        id="codepen-embed-script-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/comment-reply.min.js.download"
        id="comment-reply-js"
        async="async"
        data-wp-strategy="async"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/prism-core.js.download"
        id="prismatic-prism-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/lang-java.js.download"
        id="prismatic-prism-java-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/lang-javascript.js.download"
        id="prismatic-prism-javascript-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/typeahead.min.js.download"
        id="wp_typeahead_js-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/hogan.min.js.download"
        id="wp_hogan_js-js"
      ></script>
      <script type="text/javascript" id="typeahead_wp_plugin-js-extra">
        /* <![CDATA[ */
        var wp_typeahead = {
          ajaxurl: "https:\/\/tympanus.net\/codrops\/wp-admin\/admin-ajax.php",
        };
        /* ]]> */
      </script>
      <script
        type="text/javascript"
        src="./dice roll_files/wp-typeahead.js.download"
        id="typeahead_wp_plugin-js"
      ></script>
      <script type="text/javascript" id="advanced-ads-pro/front-js-extra">
        /* <![CDATA[ */
        var advanced_ads_cookies = {
          cookie_path: "\/codrops\/",
          cookie_domain: "",
        };
        var advadsCfpInfo = {
          cfpExpHours: "3",
          cfpClickLimit: "3",
          cfpBan: "7",
          cfpPath: "\/codrops",
          cfpDomain: "",
        };
        /* ]]> */
      </script>
      <script
        type="text/javascript"
        src="./dice roll_files/advanced-ads-pro.min.js.download"
        id="advanced-ads-pro/front-js"
      ></script>
      <script type="module" src="./dice roll_files/yall.js.download"></script>
      <script
        type="module"
        src="./dice roll_files/lazy-load-videos.js.download"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/patreon.js.download"
        id="patreon-js"
      ></script>
      <script
        type="text/javascript"
        src="./dice roll_files/bsafooter.js.download"
        id="bsa-script-js"
      ></script>
      <script
        type="text/javascript"
        id="advanced-ads-pro/cache_busting-js-extra"
      >
        /* <![CDATA[ */
        var advanced_ads_pro_ajax_object = {
          ajax_url: "https:\/\/tympanus.net\/codrops\/wp-admin\/admin-ajax.php",
          lazy_load_module_enabled: "",
          lazy_load: { default_offset: 0, offsets: [] },
          moveintohidden: "",
          wp_timezone_offset: "3600",
          the_id: "69521",
          is_singular: "1",
        };
        var advanced_ads_responsive = { reload_on_resize: "0" };
        /* ]]> */
      </script>
      <script
        type="text/javascript"
        src="./dice roll_files/base.min.js.download"
        id="advanced-ads-pro/cache_busting-js"
      ></script>
      <script type="text/javascript" id="advadsTrackingScript-js-extra">
        /* <![CDATA[ */
        var advadsTracking = {
          impressionActionName: "aatrack-records",
          clickActionName: "aatrack-click",
          targetClass: "tympa-target",
          blogId: "1",
          frontendPrefix: "tympa-",
        };
        /* ]]> */
      </script>
      <script
        type="text/javascript"
        src="./dice roll_files/tracking.min.js.download"
        id="advadsTrackingScript-js"
      ></script>
      <script>
        window.advads_admin_bar_items = [
          { title: "Article (Chromatic)", type: "ad" },
          { title: "Article 1", type: "group" },
          { title: "Bottom (Chromatic)", type: "ad" },
          { title: "Bottom", type: "group" },
          { title: "Sidebar (Chromatic)", type: "ad" },
          { title: "Sidebar 2", type: "group" },
        ];
      </script>
      <script>
        window.advads_has_ads = [
          ["80588", "ad", "Article (Chromatic)", "off"],
          ["80590", "ad", "Bottom (Chromatic)", "off"],
          ["80593", "ad", "Sidebar (Chromatic)", "off"],
        ];
        (window.advanced_ads_ready || jQuery(document).ready).call(
          null,
          function () {
            if (!window.advanced_ads_pro) {
              console.log(
                "Advanced Ads Pro: cache-busting can not be initialized"
              );
            }
          }
        );
      </script>
      <script>
        !(function () {
          (window.advanced_ads_ready_queue =
            window.advanced_ads_ready_queue || []),
            (advanced_ads_ready_queue.push = window.advanced_ads_ready);
          for (var d = 0, a = advanced_ads_ready_queue.length; d < a; d++)
            advanced_ads_ready(advanced_ads_ready_queue[d]);
        })();
      </script>
      <script id="tympa-tracking">
        var advads_tracking_ads = { 1: [80588, 80590, 80593] };
        var advads_tracking_urls = {
          1: "https:\/\/tympanus.net\/codrops\/wp-content\/ajax-handler.php",
        };
        var advads_tracking_methods = { 1: "frontend" };
        var advads_tracking_parallel = { 1: false };
        var advads_tracking_linkbases = {
          1: "https:\/\/tympanus.net\/codrops\/linkout\/",
        };
      </script>
    </div>
    <!--ct-container-->
    <!-- 100% privacy-first analytics -->
    <script
      async=""
      defer=""
      src="./dice roll_files/latest.js.download"
    ></script>
    <noscript
      ><img
        src="https://queue.simpleanalyticscdn.com/noscript.gif"
        alt=""
        referrerpolicy="no-referrer-when-downgrade"
    /></noscript>
  </body>
</html>
